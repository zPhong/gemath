(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(t,e,n){"use strict";n.r(e);var o=n(0),a=n.n(o),i=n(10),r=n.n(i);n(72),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=n(16),s=n(5),u=n(7),d=n(15),l=n(8),p=n(14),f=n(1),h=(n(73),n(36)),g=n(4),y=n(110),v=n(109),m=n(63),b=n(22),x=n(24),I=(n(46),new(function(){function t(){Object(s.a)(this,t),this.additionSegment=[],this.relationsResult={},this.pointsMap=[],this.pointsDirectionMap={},this.executedRelations=[],this.executedNode=[],this.__pointDetails__=new Map}return Object(u.a)(t,[{key:"clear",value:function(){this.relationsResult=[],this.pointsMap=[],this.executedRelations=[],this.executedNode=[],this.__pointDetails__.clear()}},{key:"pushAdditionSegment",value:function(t){this.additionSegment.push(t)}},{key:"setPointsMap",value:function(t){this.pointsMap=t}},{key:"setRelationsResult",set:function(t){this.relationsResult=t}},{key:"getAdditionSegment",get:function(){return this.additionSegment}},{key:"getRelationsResult",get:function(){return this.relationsResult}},{key:"getPointsMap",get:function(){return this.pointsMap}},{key:"getPointDirectionMap",get:function(){return this.pointsDirectionMap}},{key:"getExecutedRelations",get:function(){return this.executedRelations}},{key:"getExecutedNode",get:function(){return this.executedNode}},{key:"getPointDetails",get:function(){return this.__pointDetails__}}]),t}())),O={define:["{object} + {object} = {object}","{object} - {object} = {object}","{object} = {value} * {object}","{object} = {object}","{object} > {object}","{object} < {object}"],relation:["{object} song song {object}","{object} vu\xf4ng g\xf3c {object}","{object} c\u1eaft {object} t\u1ea1i {arrayPoints}","{object} ph\xe2n gi\xe1c ngo\xe0i {angle}","{object} ph\xe2n gi\xe1c trong {angle}","{object} ph\xe2n gi\xe1c {angle}","{arrayPoints} th\u1eb3ng h\xe0ng","{point} trung \u0111i\u1ec3m {segment}","{point} kh\xf4ng thu\u1ed9c {object}","{point} thu\u1ed9c {object}","trung tuy\u1ebfn {segment} c\u1ee7a {triangle}","\u0111\u01b0\u1eddng cao {segment} c\u1ee7a {triangle}","{segment} ti\u1ebfp tuy\u1ebfn {circle}"],shape:["tam gi\xe1c {type triangle}","t\u1ee9 gi\xe1c {quadrilateral}","h\xecnh thang {type trapezoid}","h\xecnh b\xecnh h\xe0nh {parallelogram}","h\xecnh ch\u1eef nh\u1eadt {rectangle}","h\xecnh thoi {rhombus}","h\xecnh vu\xf4ng {square}","{object type triangle}"]},N=["vu\xf4ng g\xf3c","c\u1eaft"],E=[["point"],["segment","ray"],["angle"]],M=["angle","segment","ray","point","circle"],P={object:{define:["angle","segment"],relation:["ray","line","segment","circle"]},point:{length:1,format:"1"},segment:{length:2,format:"11"},ray:{length:2,format:"10"},line:{length:1,format:"0"},angle:{length:3},shape:{triangle:{length:3,format:"111"},quadrilateral:{length:4,format:"1111"},trapezoid:{length:4,format:"1111"},parallelogram:{length:4,format:"1111"},rectangle:{length:4,format:"1111"},rhombus:{length:4,format:"1111"},square:{length:4,format:"1111"},circle:{length:1,format:"1"}},shapeType:{triangle:["","vu\xf4ng","c\xe2n","vu\xf4ng c\xe2n","\u0111\u1ec1u","n\u1ed9i ti\u1ebfp","ngo\u1ea1i ti\u1ebfp"],trapezoid:["","vu\xf4ng","c\xe2n"]}},j={triangle:{right:"01^02",isosceles:"01=02",right_isosceles:"01^02&01=02",equilateral:"01=02&01=12&02=12"},trapezoid:{normal:"01|23",right:"01|23&01^03",isosceles:"01|23&03=12"},parallelogram:{normal:"01|23&03|12"},rectangle:{normal:"01^12&12^23&23^30&30^01"},rhombus:{normal:"02^13"},square:{normal:"01|23&03|12&01^12&12^23&23^03&01=03&&01=12&12=23&&23=03"}},S={"vu\xf4ng":"right","c\xe2n":"isosceles","vu\xf4ng c\xe2n":"right_isosceles","\u0111\u1ec1u":"equilateral","n\u1ed9i ti\u1ebfp":"n\u1ed9i ti\u1ebfp","ngo\u1ea1i ti\u1ebfp":"ngo\u1ea1i ti\u1ebfp"},D=["n\u1ed9i ti\u1ebfp","ngo\u1ea1i ti\u1ebfp"],C=["triangle","trapezoid","rectangle","square"],w=["rhombus","trapezoid","parallelogram"],k={Number:Object.freeze({MIN_RANDOM_NUMBER:-10,MAX_RANDOM_NUMBER:10,MIN_RANDOM_GENERATION:5,MAX_RANDOM_GENERATION:15,NOT_FOUND:99}),String:Object.freeze({INFINITY:"v\xf4 c\u1ef1c",IMPOSSIBLE:"v\xf4 nghi\u1ec7m",TOO_SHORT:"qu\xe1 ng\u1eafn",NOT_ENOUGH_SET:"kh\xf4ng \u0111\u1ee7 ph\u01b0\u01a1ng tr\xecnh t\u1ea1o th\xe0nh h\u1ec7",NOT_BE_IN_LINE:"\u0111i\u1ec3m kh\xf4ng thu\u1ed9c \u0111\u01b0\u1eddng"}),Regex:Object.freeze({KEY:"[^{\\}]+(?=})",OTHER:"(^([^{]+(?={)))|((?<=})([^{]+)(?={))|(((?<=})[^}]+)$)"}),Others:Object.freeze({OPERATIONS:["+","-","*","<",">","="]}),Errors:Object.freeze({UNDEFINED_ERROR:"L\u1ed7i kh\xf4ng x\xe1c d\u1ecbnh",WRONG_FORMAT:"Sai \u0111\u1ecbnh d\u1ea1ng",MAXIMUM_POINT_ERROR:"T\u1ed1i \u0111a 3 \u0111i\u1ec3m th\u1eb3ng h\xe1ng"}),InputStatus:Object.freeze({SUCCESS:"Success",NORMAL:"Normal",ERROR:"Error"}),TutorialString:{STEP_ONE:"\n  Danh s\xe1ch c\xe1c m\u1eabu c\xe2u d\u1eb7c tr\u01b0ng:\n    \n__ = __\n    \n__ song song/vu\xf4ng g\xf3c __\n    \n__ c\u1eaft __ t\u1ea1i __\n    \n__ ph\xe2n gi\xe1c __\n    \n__ th\u1eb3ng h\xe0ng\n    \n__ trung \u0111i\u1ec3m __\n    \n__ thu\u1ed9c/kh\xf4ng thu\u1ed9c __\n    \n__ ti\u1ebfp tuy\u1ebfn (__)\n    \ntam gi\xe1c {lo\u1ea1i} __\n    \nt\u1ee9 gi\xe1c __\n    \n\u0111\u01b0\u1eddng tr\xf2n t\xe2m __ ngo\u1ea1i ti\u1ebfp/n\u1ed9i ti\u1ebfp __\n\nL\u01b0u \xfd:\n  \n \u0110\u01b0\u1eddng tr\xf2n trong c\xe1i m\u1ed1i quan h\u1ec7 kh\xe1c s\u1ebd n\u1eb1m trong ()\n  \n  Vd: AB ti\u1ebfp tuy\u1ebfn (O)\n  "}};function B(t){return{a:0,b:0,c:t.c,d:t.d,e:t.e}}function R(t){return{a:-t.c/(0===t.d?1:t.d),b:-t.e/(0===t.d?1:t.d)}}function _(t){return{a:0,b:0,c:-t.a,d:1,e:-t.b}}var A=k.Number.MIN_RANDOM_NUMBER,q=k.Number.MAX_RANDOM_NUMBER;function T(t,e){return e<t?t:Math.floor(Math.random()*(e-t+1))+t}function z(t){if(t.a||(t.a=0),t.b||(t.b=0),0===t.a&&0===t.b){if(0!==t.d){var e=T(A,q);return{x:e,y:(-t.e-t.c*e)/t.d}}return{x:-t.e/t.c,y:T(A,q)}}if(1===t.a&&1===t.b){var n={a:t.c/-2,b:t.d/-2},o=Math.sqrt(n.a*n.a+n.b*n.b-t.e),a=T(n.a-o,n.a+o),i=st(t.b,t.d,a*a+t.c*a+t.e);if("number"===typeof i)return{x:a,y:i};if("object"===typeof i)return{x:a,y:i.secondRoot||i.firstRoot}}}function H(t,e){var n=$(t,e),o=(t.x+e.x)/T(2,5);return{x:o,y:(n.c*o+n.e)/-n.d}}function L(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=$(t,e),a=T(e.x,q),i=T(A,t.x);return n?{x:a,y:(o.c*a+o.e)/-o.d}:{x:i,y:(o.c*i+o.e)/-o.d}}var U={200:k.Errors.UNDEFINED_ERROR,300:k.Errors.WRONG_FORMAT,301:k.Errors.MAXIMUM_POINT_ERROR,400:k.String.IMPOSSIBLE,401:k.String.INFINITY,500:k.String.NOT_BE_IN_LINE,501:k.String.NOT_ENOUGH_SET,502:k.String.TOO_SHORT},V=new(function(){function t(){Object(s.a)(this,t),this.message=""}return Object(u.a)(t,[{key:"showError",value:function(t,e){var n;if(e)n=re.inputData.filter(function(t){return t===e})[0];else switch(t){case 300:case 301:n=re.executedInputIndex;break;default:n=re.inputData.filter(function(t){return t===re.executingRelation})[0]}throw n>=0&&(re.RelationsInput[n].status=k.InputStatus.ERROR),alert(U[t]),console.error("error",U[t])}},{key:"ErrorMessage",get:function(){return this.message}}]),t}()),J=(k.Number.MIN_RANDOM_NUMBER,k.Number.MAX_RANDOM_NUMBER,k.String.INFINITY),G=k.String.IMPOSSIBLE,X=k.String.NOT_BE_IN_LINE;function K(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(isNaN(t))throw console.error("error",t);var n=Math.pow(10,e);return Math.round(t*n)/n}function F(t,e){return!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?{x:K(e.x-t.x),y:K(e.y-t.y)}:{x:e.x-t.x,y:e.y-t.y}}function Y(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function W(t,e){return!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?{x:2*e.x-t.x,y:2*e.y-t.y}:{x:2*t.x-e.x,y:2*t.y-e.y}}function $(t,e){var n={a:e.x-t.x,b:e.y-t.y},o={a:-n.b,b:n.a};return{a:0,b:0,c:o.a,d:o.b,e:-o.a*t.x-o.b*t.y}}function Q(t,e){var n=(e.x-t.x)*(e.x-t.x),o=(e.y-t.y)*(e.y-t.y);return Math.sqrt(n+o)}function Z(t,e){var n=Math.abs(e.c*t.x+e.d*t.y+e.e),o=Math.sqrt(e.c*e.c+e.d*e.d);return 0===o?J:n/o}function tt(t,e){var n=R(e),o={};o.a=n.a,o.b=t.y-n.a*t.x;var a=_(o);return 0===e.d&&(a.d=e.d),a}function et(t,e){var n={};if(0===e.c)n.c=-1/e.d,n.d=0,n.e=-n.c*t.x;else if(0===e.d)n.c=0,n.d=-1/e.c,n.e=-n.d*t.y;else{var o=R(e),a={};a.a=-1/o.a,a.b=t.y+t.x/o.a,n=_(a)}return n}function nt(t,e){return dt({c:t.c,d:t.d,e:t.e},{a:0,b:0,c:e.c,d:e.d,e:e.e})[0]}function ot(t,e){var n=K(e,6);return{a:1,b:1,c:-2*t.x,d:-2*t.y,e:t.x*t.x+t.y*t.y-n*n}}function at(t,e,n,o){var a=it(t,e),i=a[0],r=a[1];if(0===gt(t,e))throw(new Map).set("error","kh\xf4ng h\u1ed7 tr\u1ee3 tr\u01b0\u1eddng h\u1ee3p n\xe0y");return rt(i,r,n,o)}function it(t,e){var n={},o={};if(e.c*e.c+e.d*e.d!==0){var a=Math.sqrt(t.c*t.c+t.d*t.d)/Math.sqrt(e.c*e.c+e.d*e.d);return n.c=t.c-a*e.c,n.d=t.d-a*e.d,n.e=t.e-a*e.e,o.c=t.c+a*e.c,o.d=t.d+a*e.d,o.e=t.e+a*e.e,[n,o]}}function rt(t,e,n,o){return(n.x*t.c+n.y*t.d+t.e)*(o.x*t.c+o.y*t.d+t.e)<=0?t:e}function ct(t,e){var n=-e.c/2,o=-e.d/2;return Z({x:n,y:o},t)>Math.sqrt(n*n+o*o-e.e)?G:dt(t,e)}function st(t,e,n){var o=e*e-4*t*n;return 0===t?0===e?J:-n/e:o<0?G:0===o?-e/(2*t):{firstRoot:(-e+Math.sqrt(o))/(2*t),secondRoot:(-e-Math.sqrt(o))/(2*t)}}function ut(t,e){return void 0!==t.x&&void 0!==t.y&&(void 0===e.a&&(e=B(e)),0===K(e.a*t.x*t.x+e.b*t.y*t.y+e.c*t.x+e.d*t.y+e.e))}function dt(t,e){var n=[],o=t.c,a=t.d,i=t.e,r=e.a,c=e.b,s=e.c,u=e.d,d=e.e;if(0!==o){var l=st(o*o*c+r*a*a,2*a*i*r-o*a*s+o*o*u,r*i*i-o*i*s+o*o*d);if("number"===typeof l)n.push({x:(-i-a*l)/o,y:l});else{if(l===G)return l;var p=l.firstRoot,f=l.secondRoot;n.push({x:(-i-a*l.firstRoot)/o,y:p},{x:(-i-a*l.secondRoot)/o,y:f})}}else{var h=st(e.a*t.d*t.d,e.c*t.d*t.d,e.b*t.e*t.e-e.d*t.d*t.e+e.e*t.d*t.d);if("number"===typeof h)n.push({x:h,y:-t.e/t.d});else{if(h===G)return h;n.push({x:h.firstRoot,y:-t.e/t.d},{x:h.secondRoot,y:-t.e/t.d})}}return n}function lt(t,e){var n,o,a=[];if(!t||!e)return G;if(n=void 0===t.a?B(t):t,o=void 0===e.a?B(e):e,n.a!==o.a&&n.b!==o.b)return 0===n.a&&0===n.b?ct(n,o):ct(o,n);if(0===n.a&&0===n.b&&0===o.a&&0===o.b)a.push(function(t,e){if(0===t.c&&0===e.c||0===t.d&&0===e.d||0===t.c&&0===t.d||0===e.c&&0===e.d)return G;if(0===t.c&&0===e.d)return{x:-e.e/e.c,y:-t.e/t.d};if(0===e.c&&0===t.d)return{x:-t.e/t.c,y:-e.e/e.d};if(0===t.e&&0===e.e)return{x:0,y:0};if(0===t.c){var n=-t.e/t.d;return{x:(-e.e-n*e.d)/e.c,y:n}}if(0===t.d){var o=-t.e/t.c;return{x:o,y:(-e.e-o*e.c)/e.d}}if(0===e.c){var a=-e.e/e.d;return{x:(-t.e-a*t.d)/t.c,y:a}}if(0===e.d){var i=-e.e/e.c;return{x:i,y:(-t.e-i*t.c)/t.d}}var r=(t.e*e.c-t.c*e.e)/(t.d*e.c-t.c*e.d);return{x:(-t.e-t.d*r)/t.c,y:r}}(n,o));else{var i=o.c,r=o.d,c=o.e,s=n.a-o.a>0?n.a:o.a,u=s===n.a?n.c:i,d=s===n.a?n.d:r,l=s===n.a?n.e:c,p=s===n.a?n.c-i:i-n.c,f=s===n.a?n.d-r:r-n.d,h=s===n.a?n.e-c:c-n.e;if(0===p||0===f)return G;var g=st(s*(f*f+p*p),2*f*h*s-u*p*f+d*p*p,s*h*h-u*p*h+l*p*p);if(g===G)return g;if("number"===typeof g)a.push({x:(-h-f*g)/p,y:g});else{var y=g.firstRoot,v=g.secondRoot;a.push({x:(-h-f*g.firstRoot)/p,y:y},{x:(-h-f*g.secondRoot)/p,y:v})}}return a}function pt(t,e,n,o){var a=function(t,e,n){var o=[],a=Math.cos(n*Math.PI/180),i=t.c*t.c-a*a*t.c*t.c-a*a*t.d*t.d,r=2*t.c*t.d,c=t.d*t.d-a*a*t.c*t.c-a*a*t.d*t.d,s=st(i,r,c);if("number"===typeof s)o.push({c:s,d:1,e:-s*e.x-e.y});else{if(s===G)return s;o.push({c:s.firstRoot,d:1,e:-s.firstRoot*e.x-e.y},{c:s.secondRoot,d:1,e:-s.secondRoot*e.x-e.y})}return o}($(t,e),n,o),i=0;return a.map(function(n){return nt($(t,e),n)}).filter(function(a,r){var c,s,u=F(t,e,!1),d=F(a,n,!1),l=(c=u,s=d,K(180*Math.acos(function(t,e){return t.x*e.x+t.y*e.y}(c,s)/(ft(c)*ft(s)))/Math.PI,1)===parseInt(o));return l&&(i=r),l})[0]?a[i]:(V.showError("500"),null)}function ft(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function ht(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return"string"===typeof t?t:{x:K(t.x,e),y:K(t.y,e)}}function gt(t,e){if(t.a||t.b||e.a||e.b)return-9999;var n=t.c,o=e.c,a=t.d,i=e.d;return K(180*Math.acos(Math.abs(n*o+a*i)/Math.sqrt((n*n+a*a)*(o*o+i*i)))/Math.PI,1)}function yt(t,e,n){var o=$(t,e);if(!ut(n,{a:0,b:0,c:o.c,d:o.d,e:o.e}))return X;var a=Q(t,e),i=Q(e,n),r=Q(t,n),c=Math.max(a,i,r);return a===c?n:r===c?e:t}function vt(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||z(t),n={a:0,b:0};return n.c=e.x+t.c/2,n.d=e.y+t.d/2,n.e=t.e+t.c*e.x/2+t.d*e.y/2,n}function mt(t){return!isNaN(t)||"number"===typeof t||function(t){return"object"===typeof t&&null!==t}(t)&&"[object Number]"===xt(t)}function bt(t){return!!t&&(1===t.a&&1===t.b)}function xt(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":toString.call(t)}function It(t){var e="";return t.split("").forEach(function(t){var n;e+=(n=t)===n.toLowerCase()?"0":"1"}),e}function Ot(t){if(mt(t))return"value";if(function(t){for(var e=0;e<t.length;e++){if(mt(t[e]))return!1;if(e>0&&t.slice(0,e-1).includes(t[e]))return!1}return!0}(t)){if(3===t.length)return t.includes("(")&&t.includes(")")?"circle":"angle";switch(It(t)){case"0":return"line";case"1":return"point";case"10":return"ray";case"11":return"segment";default:return}}}function Nt(t,e){if(!Mt(t.value))return!1;var n,o=P.object[e];if("value"===t.key||"relation"===t.key||"undefined"===t.key||"circle"===t.key)return!0;if("angle"===t.key&&!function(t){return"1"===It(t)[1]}(t.value))return!1;if(o.includes(t.key)||"object"!==t.key){var a=It(t.value);if((n=P[t.key])&&a)if(n.format){if(a===n.format&&t.value.length===n.length)return!0}else if(t.value.length===n.length)return!0}return!1}function Et(t,e){var n=e.split("").map(function(e){return t.includes(e)}),o=Object(c.a)(new Set(n));return 1===o.length?!o[0]:2===e.length?-1===n.indexOf(!0):3===e.length?!(0===n.indexOf(!0)||2===n.indexOf(!0)):void 0}function Mt(t){return t.split("").length===t.split("").filter(function(t,e,n){return n.indexOf(t)===e}).length}function Pt(t){var e=t.outputType;if("shape"===e)return function(t){var e=Object.keys(t),n=P.shape[e[0]],o=P.shapeType[e[0]]||[""],a=t[e[0]],i=It(t[e[0]])===n.format&&a.length===n.length,r=t.type||"",c=o.includes(r);return i&&c&&Mt(t[e[0]])}(t);delete t.outputType;var n=Object.keys(t);if(n.includes("undefined"))return!1;for(var o=0;o<n.length;o++)for(var a=t[n[o]],i=n[o],r=0;r<a.length;r++){var c=Nt({key:i,value:a[r]},e);if(!c)return c}var s=Object.keys(t);return t.outputType=e,"define"===e?s.includes("value")?2===s.length:1===s.length:"relation"!==e||function(t){for(var e=Object.keys(t),n=0;n<E.length-1;n++)for(var o=0;o<E[n].length;o++)for(var a=0;a<E[n+1].length;a++)if(e.includes(E[n][o])&&t[E[n+1][a]])return Et(t[E[n][o]][0],t[E[n+1][a]][0]);return!0}(t)}function jt(t){var e;switch(t.outputType){case"shape":e=function(t){var e={};return Object.keys(t).forEach(function(n){if(n.includes("type")){var o=t[n].toString().split(" "),a=o[o.length-1],i=n.split(" ").pop(),r=t[n].toString().replace(a,"").trim().split(" ");e[i]=a;var c="";3===r[0].length&&r[0].includes("(")&&r[0].includes(")")&&(e.point=r[0][1],c=r[0]),e.type=r.join(" ").replace(c,"").trim()}else e[n]=t[n].toString()}),console.log(e),e}(t);break;case"relation":e=function(t){var e={};return Object.keys(t).forEach(function(n){"arrayPoints"===n?e.point=t[n].toString().split(","):e[n]=t[n]}),e}(t);break;default:e=t}if(N.includes(e.relation)&&(e.object=e.object.reverse()),Object.keys(e).forEach(function(t){"object"===t&&e[t].forEach(function(t){var n=Ot(t);e[n]||(e[n]=[]),"segment"===n&&(t=St(t)),"circle"===n&&(t=t[1].toUpperCase()),e[n].push(t)}),"circle"===t&&e[t].forEach(function(n,o){e[t][o]=e[t][o][1]})}),"shape"===t.outputType){var n=Object.keys(e).filter(function(t){return"type"!==t})[0];"triangle"!==n&&(e[n]=St(e[n]))}return delete e.object,Pt(e)?e:{Error:e}}function St(t){return t.split("").sort().join("")}var Dt,Ct,wt,kt=k.Number.MIN_RANDOM_GENERATION,Bt=k.Number.MAX_RANDOM_GENERATION,Rt={triangle:function(t,e){if(3===t.length){var n={x:0,y:0,z:0},o={},a={};switch(re.updateCoordinate(t[0],n),e){case"":a.y=T(n.y+5,n.y+10),a.x=T(n.x-3,n.x-10),re.updateCoordinate(t[1],a),o.y=a.y,o.x=T(n.x+3,a.x+10),re.updateCoordinate(t[2],o);break;case"vu\xf4ng":o.y=T(n.y+kt,n.y+Bt),o.x=n.x,re.updateCoordinate(t[2],o),a.x=T(n.x+1,n.x+50),a.y=n.y,re.updateCoordinate(t[1],a);break;case"c\xe2n":var i=T(3,6);a.y=T(n.y+5,n.y+10),a.x=n.x-i,re.updateCoordinate(t[1],a),o.y=a.y,o.x=n.x+i,re.updateCoordinate(t[2],o);break;case"vu\xf4ng c\xe2n":var r=T(5,10);a.y=n.y+r,a.x=n.x-r,re.updateCoordinate(t[1],a),o.y=a.y,o.x=n.x+r,re.updateCoordinate(t[2],o);break;case"\u0111\u1ec1u":o.x=T(n.x+kt,n.x+Bt),o.y=Math.sqrt(3)*o.x,re.updateCoordinate(t[2],o);var c=Q(n,o);a.y=o.y,a.x=-c+o.x,re.updateCoordinate(t[1],a)}}},quadrilateral:function(t){if(4===t.length){var e={x:0,y:0,z:0};re.updateCoordinate(t[0],e);var n={x:T(e.x+kt,e.x+Bt),y:T(e.y-Bt,e.y+Bt)};re.updateCoordinate(t[1],n);var o={},a=$(e,n);do{o.x=T(e.x+kt,e.x+Bt),o.y=T(e.y+kt,e.y+Bt)}while(o.y===a.coefficientX*o.x+a.constantTerm);re.updateCoordinate(t[2],o);var i={x:T(e.x-Bt,o.x),y:void 0},r=$(e,n);do{i.y=T(e.x,e.x+Bt)}while(i.y===r.coefficientX*i.x+r.constantTerm);re.updateCoordinate(t[3],i)}},trapezoid:function(t,e){if(4===t.length){var n={x:0,y:0,z:0};switch(re.updateCoordinate(t[0],n),e){case"":var o={x:T(n.x+kt,n.x+Bt),y:n.y};re.updateCoordinate(t[1],o);var a={x:T(o.x+kt,o.x+Bt),y:T(n.y+kt,n.y+Bt)};re.updateCoordinate(t[2],a);var i={x:T(n.x-Bt,a.x-kt),y:a.y};re.updateCoordinate(t[3],i);break;case"c\xe2n":var r={x:T(n.x+kt,n.x+Bt),y:n.y};re.updateCoordinate(t[1],r);var c={x:T(r.x+kt,r.x+Bt),y:T(n.y+kt,n.y+Bt)};re.updateCoordinate(t[2],c);var s=Math.abs(c.x-r.x),u=1===T(0,2)?n.x+s:n.x-s,d={x:u,y:c.y};re.updateCoordinate(t[3],d)}}},parallelogram:function(t){if(4===t.length){var e={x:0,y:0,z:0};re.updateCoordinate(t[0],e);var n={x:T(e.x+kt,e.x+Bt),y:e.y};re.updateCoordinate(t[1],n);var o={x:T(e.x+kt,e.x+Bt),y:T(e.x+kt,e.x+Bt)};re.updateCoordinate(t[2],o);var a={x:o.x-n.x-e.x,y:o.y};re.updateCoordinate(t[3],a)}},rectangle:function(t){if(4===t.length){var e={x:0,y:0,z:0};re.updateCoordinate(t[0],e);var n={x:T(e.x+kt,e.x+Bt),y:e.y};re.updateCoordinate(t[1],n);var o={x:n.x,y:T(n.y+kt,n.y+Bt)};re.updateCoordinate(t[2],o);var a={x:e.x,y:o.y};re.updateCoordinate(t[3],a)}},rhombus:function(t){if(4===t.length){var e={x:0,y:0,z:0};re.updateCoordinate(t[0],e);var n={x:T(e.x+kt,e.x+Bt),y:-T(e.y+kt,e.y+Bt)};re.updateCoordinate(t[1],n);var o={x:2*Math.abs(n.x-e.x),y:e.y};re.updateCoordinate(t[2],o);var a={x:n.x,y:Math.abs(-n.y-e.y)};re.updateCoordinate(t[3],a)}},square:function(t){if(4===t.length){var e={x:0,y:0,z:0};re.updateCoordinate(t[0],e);var n={x:T(e.x+kt,e.x+Bt),y:e.y};re.updateCoordinate(t[1],n);var o={x:n.x,y:n.y+Q(e,n)};re.updateCoordinate(t[2],o);var a={x:e.x,y:o.y};re.updateCoordinate(t[3],a)}},circle:function(t){}};function _t(t,e){var n;if(re.executingRelation=t,t.operation)n=function(t,e){var n=t.segment?"segment":"angle",o={},a=[];for(var i in t[n]){var r=t[n][i];r.includes(e)&&a.push(r);var s=!0;if(r.split("").forEach(function(t){t===e||re.isStaticNodeById(t)||(s=!1)}),!s)return;o[r]="segment"===n?Q(re.getNodeInPointsMapById(r[0]).coordinate,re.getNodeInPointsMapById(r[1]).coordinate):gt($(re.getNodeInPointsMapById(r[0]).coordinate,re.getNodeInPointsMapById(r[1]).coordinate),$(re.getNodeInPointsMapById(r[1]).coordinate,re.getNodeInPointsMapById(r[2]).coordinate))}if(1===a.length){var u,d=t[n].indexOf(a[0]),l=t[n][0===d?1:0];return u=t[n].length>1?0===d?t.value*o[l]:o[l]/t.value:t.value[0],"segment"===n?ot(re.getNodeInPointsMapById(a[0].replace(e,"")).coordinate,u):function(t,e){var n=function(t){for(var e=function(){var t=[];return re.getData.relationsResult.shapes.forEach(function(e){var n=Object.keys(e).filter(function(t){return"outputType"!==t})[0];w.includes(n)&&t.push(e[n])}),t}(),n="".concat(t[1]).concat(t[2]),o=0;o<e.length;o++){var a=e[o],i=F(re.getNodeInPointsMapById(n[0]).coordinate,re.getNodeInPointsMapById(n[1]).coordinate);if(r=F(re.getNodeInPointsMapById(a[0]).coordinate,re.getNodeInPointsMapById(a[1]).coordinate),c=i,0===r.x?0===c.x:0===r.y?0===c.y:0===c.x?0===r.x:0===c.y?0===r.y:K(r.x*c.y)===K(r.y*c.x))return t.split("").reverse().join("")}var r,c;return t}(t),o=re.getNodeInPointsMapById(n[0]).coordinate,a=re.getNodeInPointsMapById(n[1]).coordinate,i=re.getNodeInPointsMapById(n[2]).coordinate,r=pt(a,o,i,e),c=nt(r,$(o,a)),s=F(lt(r,ot(i,Q(i,a))).sort(function(t,e){return Q(c,t)-Q(c,e)})[0],a,!1);if(n===t)return re.updateCoordinate(n[2],{x:i.x+s.x,y:i.y+s.y}),void re.replaceSetOfEquation(n[2],$(a,i),tt(a,r));return re.updateCoordinate(n[0],{x:o.x-s.x,y:o.y-s.y}),re.replaceSetOfEquation(n[1],$(a,i),tt(a,r)),null}(a[0],u)}if(2===a.length&&"segment"===n){var p=a[0].replace(e,""),f=a[1].replace(e,"");if(!re.isStaticNodeById(p)||!re.isStaticNodeById(f))return;var h=$(re.getNodeInPointsMapById(p).coordinate,re.getNodeInPointsMapById(f).coordinate),g=Q(re.getNodeInPointsMapById(p).coordinate,re.getNodeInPointsMapById(f).coordinate),y=ut(re.getNodeInPointsMapById(e).coordinate,{a:0,b:0,c:h.coefficientX,d:h.coefficientY,e:h.constantTerm}),v=+t.value[0];if(y){var m,b=yt(re.getNodeInPointsMapById(e).coordinate,re.getNodeInPointsMapById(p).coordinate,re.getNodeInPointsMapById(f).coordinate);return b===re.getNodeInPointsMapById(e).coordinate&&(m=ct(h,ot(re.getNodeInPointsMapById(p).coordinate,v*g/(v+1))),Object(c.a)(m).forEach(function(t){var e=yt(t,re.getNodeInPointsMapById(p).coordinate,re.getNodeInPointsMapById(f).coordinate);e===t&&(m=t)})),b===re.getNodeInPointsMapById(p).coordinate&&v<1&&(m=ct(h,ot(re.getNodeInPointsMapById(p).coordinate,v*g/(1-v))),Object(c.a)(m).forEach(function(t){var e=yt(t,re.getNodeInPointsMapById(p).coordinate,re.getNodeInPointsMapById(f).coordinate);e===re.getNodeInPointsMapById(p).coordinate&&(m=t)})),b===re.getNodeInPointsMapById(f).coordinate&&v>1&&(m=ct(h,ot(re.getNodeInPointsMapById(p).coordinate,v*g/(v-1))),Object(c.a)(m).forEach(function(t){var e=yt(t,re.getNodeInPointsMapById(p).coordinate,re.getNodeInPointsMapById(f).coordinate);e===re.getNodeInPointsMapById(f).coordinate&&(m=t)})),re.updateCoordinate(e,m),h}return null}}(t,e);else if(t.relation){switch(t.relation){case"trung \u0111i\u1ec3m":case"thu\u1ed9c":case"kh\xf4ng thu\u1ed9c":case"song song":case"vu\xf4ng g\xf3c":case"ph\xe2n gi\xe1c":case"ph\xe2n gi\xe1c ngo\xe0i":case"ph\xe2n gi\xe1c trong":case"th\u1eb3ng h\xe0ng":n=function(t,e){var n,o;t.segment&&t.segment.forEach(function(t){t.includes(e)?n=t:o=t});var a=t.relation;if("trung \u0111i\u1ec3m"===a||"thu\u1ed9c"===a||"kh\xf4ng thu\u1ed9c"===a||"th\u1eb3ng h\xe0ng"===a){var i;if(t.circle)return i=z(re.getCircleEquation(t.circle[0])),re.updateCoordinate(t.point[0],i),re.getCircleEquation(t.circle[0]);if(n){var r=t.point[0],c=re.getNodeInPointsMapById(n.replace(e,""));if(!c.coordinate.x&&!c.coordinate.y)return null;"trung \u0111i\u1ec3m"===a&&(i=W(c.coordinate,re.getNodeInPointsMapById(r).coordinate,1===n.indexOf(e)),re.updateCoordinate(e,i))}else{if(!o){var s=t.point,u=s.indexOf(e);return 1===u?(i=H(re.getNodeInPointsMapById(s[0]).coordinate,re.getNodeInPointsMapById(s[2]).coordinate),re.updateCoordinate(e,i)):(i=L(re.getNodeInPointsMapById(s[2===u?0:1]).coordinate,re.getNodeInPointsMapById(s[2===u?1:2]).coordinate,2===u),re.updateCoordinate(e,i)),$(re.getNodeInPointsMapById(s[0]).coordinate,re.getNodeInPointsMapById(s[1]).coordinate)}switch(a){case"trung \u0111i\u1ec3m":i=Y(re.getNodeInPointsMapById(o[0]).coordinate,re.getNodeInPointsMapById(o[1]).coordinate),re.updateCoordinate(e,i);break;case"thu\u1ed9c":i=H(re.getNodeInPointsMapById(o[0]).coordinate,re.getNodeInPointsMapById(o[1]).coordinate),re.updateCoordinate(e,i);break;case"kh\xf4ng thu\u1ed9c":i=L(re.getNodeInPointsMapById(o[0]).coordinate,re.getNodeInPointsMapById(o[1]).coordinate,1===T(0,2)),re.getData.getAdditionSegment.push("".concat(e).concat(o[0])),re.updateCoordinate(e,i)}}return $(re.getNodeInPointsMapById(t.segment[0][0]).coordinate,re.getNodeInPointsMapById(t.segment[0][1]).coordinate)}if("song song"===a||"vu\xf4ng g\xf3c"===a){if(!o)return;var d=n.replace(e,"");if(!re.isValidCoordinate(d)&&!re.isValidCoordinate(e)){var l=function(t,e){var n=$(t,e);return z(et(H(t,e),n))}(re.getNodeInPointsMapById(o[0]).coordinate,re.getNodeInPointsMapById(o[1]).coordinate);l&&re.updateCoordinate(d,l)}for(var p=0;p<2;p++)if(!re.isValidCoordinate(o[p]))return;var f,h=$(re.getNodeInPointsMapById(o[0]).coordinate,re.getNodeInPointsMapById(o[1]).coordinate);if(!re.isValidCoordinate(d))return;if("vu\xf4ng g\xf3c"===a){f=et(re.getNodeInPointsMapById(d).coordinate,h);var g=ut(re.getNodeInPointsMapById(d).coordinate,h),y=g?z(f):nt(f,h);g||(re.getData.pushAdditionSegment("".concat(e).concat(o[1])),re.getData.pushAdditionSegment("".concat(e).concat(o[0]))),re.updateCoordinate(e,y)}if("song song"===a){var v=z(f=tt(re.getNodeInPointsMapById(d).coordinate,h));re.updateCoordinate(e,v)}return f}if(a.includes("ph\xe2n gi\xe1c")){var m="ph\xe2n gi\xe1c ngo\xe0i"===a;if(t.angle){var b=t.angle[0];if(b.includes(e))return;var x,I=$(re.getNodeInPointsMapById(b[0]).coordinate,re.getNodeInPointsMapById(b[2]).coordinate);if(m){var O=z(x=function(t,e,n,o){var a=it(t,e),i=a[0],r=a[1];if(0===gt(t,e))throw(new Map).set("error","kh\xf4ng h\u1ed7 tr\u1ee3 tr\u01b0\u1eddng h\u1ee3p n\xe0y");var c=rt(i,r,n,o);return(a=a.filter(function(t){return JSON.stringify(t)!==JSON.stringify(c)}))[0]}($(re.getNodeInPointsMapById(b[0]).coordinate,re.getNodeInPointsMapById(b[1]).coordinate),$(re.getNodeInPointsMapById(b[1]).coordinate,re.getNodeInPointsMapById(b[2]).coordinate),re.getNodeInPointsMapById(b[0]).coordinate,re.getNodeInPointsMapById(b[2]).coordinate));re.updateCoordinate(e,O)}else{var N=nt(x=at($(re.getNodeInPointsMapById(b[0]).coordinate,re.getNodeInPointsMapById(b[1]).coordinate),$(re.getNodeInPointsMapById(b[1]).coordinate,re.getNodeInPointsMapById(b[2]).coordinate),re.getNodeInPointsMapById(b[0]).coordinate,re.getNodeInPointsMapById(b[2]).coordinate),I);re.updateCoordinate(e,N)}return x}}}(t,e);break;case"c\u1eaft":n=function(t,e){for(var n in t.segment)for(var o=0;o<2;o++)if(!re.isValidCoordinate(t.segment[n][o]))return;if(2===t.segment.length){var a=$(re.getNodeInPointsMapById(t.segment[0][0]).coordinate,re.getNodeInPointsMapById(t.segment[0][1]).coordinate),i=$(re.getNodeInPointsMapById(t.segment[1][0]).coordinate,re.getNodeInPointsMapById(t.segment[1][1]).coordinate);t.segment.forEach(function(e){re.getData.pushAdditionSegment("".concat(t.point[0]).concat(e[0])),re.getData.pushAdditionSegment("".concat(t.point[0]).concat(e[1]))});var r=nt(a,i);re.updateCoordinate(t.point[0],r)}else if(2===t.circle.length){var c=lt(re.getCircleEquation(t.circle[0]),re.getCircleEquation(t.circle[1]));c.forEach(function(e,n){t.point[n]?re.updateCoordinate(t.point[n],e):V.showError("500")})}else{var s=re.getNodeInPointsMapById(t.segment[0][0]).coordinate,u=re.getNodeInPointsMapById(t.segment[0][1]).coordinate,d=lt($(s,u),re.getCircleEquation(t.circle[0]));d=d.filter(function(t){return JSON.stringify(t)!==JSON.stringify(s)&&JSON.stringify(t)!==JSON.stringify(u)}),2===t.point.length?d.forEach(function(e,n){t.point[n]?re.updateCoordinate(t.point[n],e):V.showError("200")}):re.updateCoordinate(t.point[0],d[T(0,d.length-1)])}}(t);break;case"ti\u1ebfp tuy\u1ebfn":n=function(t,e){var n=t.segment[0].replace(e,"");if(!re.isStaticNodeById(n))return;var o,a=re.getNodeInPointsMapById(n).coordinate,i=re.getCircleEquation(t.circle[0]);if(ut(a,i))o=vt(i,a),re.updateCoordinate(e,z(o));else{var r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o={x:-t.c/2,y:-t.d/2},a=lt(t,ot(Y(o,e),Q(o,e)/2));return n&&(a=a.filter(function(t){return JSON.stringify(t)!==JSON.stringify(n)})),a}(i,a),c=function(t,e){var n=t.filter(function(t){return!re.isCoordinateDuplicated(t)});return n.map(function(t){return{equation:vt(e,t),point:t}})[T(0,n.length-1)]}(r,i);o=c.tangentEquation,re.updateCoordinate(e,c.point)}return o}(t,e);break;default:n=null}}else if("shape"===t.outputType){var o=Object.keys(t).filter(function(t){return"type"!==t})[0];switch(o){case"triangle":n=$(re.getNodeInPointsMapById(t[o][0]).coordinate,re.getNodeInPointsMapById(e).coordinate);break;case"quadrilateral":case"rectangle":case"square":case"rhombus":case"trapezoid":case"parallelogram":if("quadrilateral"!==o){var a=0;t[o].split("").forEach(function(t){re.isStaticNodeById(t)&&a++});var i=C.includes(o)?1:2;if(a>i)return}var r=t[o].indexOf(e);r===t[o].length-1?n=$(re.getNodeInPointsMapById(t[o][r]).coordinate,re.getNodeInPointsMapById(t[o][0]).coordinate):(r=0===r?t[o].length-1:r-1,n=$(re.getNodeInPointsMapById(t[o][r]).coordinate,re.getNodeInPointsMapById(e).coordinate))}}return n?void 0!==n.coefficientX?{a:0,b:0,c:n.coefficientX,d:n.coefficientY,e:n.constantTerm}:n:null}function At(t){(function(t){for(var e=[],n=0;n<t.length;n++){for(var o=!0,a=0;a<e.length;a++)if(t[n].relation===e[a]){o=!1;break}o&&e.push(t[n].relation)}return e})(t.dependentNodes).forEach(function(e){var n,o;if("shape"===e.outputType){if(Ct=Object.keys(e).filter(function(t){return"type"!==t})[0],wt=S[e.type]||"normal",Dt=e[Ct],D.includes(wt)){var a=null;switch(console.log(re.getNodeInPointsMapById(Dt[0]).coordinate,re.getNodeInPointsMapById(Dt[1]).coordinate,re.getNodeInPointsMapById(Dt[2]).coordinate),wt){case"n\u1ed9i ti\u1ebfp":a=function(t,e,n){var o=nt(at($(t,n),$(t,e),e,n),at($(e,n),$(t,e),t,n)),a=Z(o,$(t,n));return{center:o,radius:a,equation:ot(o,a)}}(re.getNodeInPointsMapById(Dt[0]).coordinate,re.getNodeInPointsMapById(Dt[1]).coordinate,re.getNodeInPointsMapById(Dt[2]).coordinate);break;case"ngo\u1ea1i ti\u1ebfp":a=function(t,e,n){var o=nt(et(Y(t,e),$(t,e)),et(Y(t,n),$(t,n))),a=Q(o,t);return{center:o,radius:a,equation:ot(o,a)}}(re.getNodeInPointsMapById(Dt[0]).coordinate,re.getNodeInPointsMapById(Dt[1]).coordinate,re.getNodeInPointsMapById(Dt[2]).coordinate)}a?(re.circlesData[e.point[0]]=a,re.updateCoordinate(e.point[0],a.center)):V.ErrorMessage("400")}else re.isExecutedRelation(e)||(!function(t,e,n){var o=Rt[e];o&&o(t,n)}(e[Ct],Ct,e.type),(o=e[Ct]).split("").forEach(function(t,e){if(e>0){var n=re.getNodeInPointsMapById(t).coordinate,a=re.getNodeInPointsMapById(o[e-1]).coordinate;re.getData.getPointDirectionMap[t]={root:o[e-1],isRight:n.x>a.x,isUp:n.y<a.y}}}));j[Ct]&&j[Ct][wt]&&qt(Dt,Ct,j[Ct][wt],t.id)}(n=_t(e,t.id))&&(Array.isArray(n)&&(n=n[T(0,n.length)]),re.executePointDetails(t.id,n)),re.isExecutedRelation(e)||re.getData.getExecutedRelations.push(e)})}function qt(t,e,n,o){for(var a=C.includes(e)?2:1,i=t.replace(o,"").split(""),r=0,c=0;c<i.length;c++)re.isStaticNodeById(i[c])&&r++;if(!(r<a)){var s=n.split(new RegExp("&","g")),u=t.indexOf(o),d=[];s.length>0&&(s.forEach(function(e){var n=e[2];if(e.includes(u)){var o;switch(n){case"|":o=function(t,e,n){var o,a;if(t.split("|").forEach(function(t){2!==t.split("").filter(function(t){return re.isStaticNodeById(e[t])}).length||o?a=t:o=t}),o&&a.includes(n)&&re.isStaticNodeById(e[a.replace(n,"")]))return[tt(re.getNodeInPointsMapById(e[a.replace(n,"")]).coordinate,$(re.getNodeInPointsMapById(e[o[0]]).coordinate,re.getNodeInPointsMapById(e[o[1]]).coordinate))]}(e,t,u);break;case"^":e[1]===e[3]?o=function(t,e,n){var o,a;if(t.split("^").forEach(function(t){2!==t.split("").filter(function(t){return re.isStaticNodeById(e[t])}).length||o?a=t:o=t}),o&&a.includes(n)&&!o.includes(n))return[et(re.getNodeInPointsMapById(e[t[1]]).coordinate,$(re.getNodeInPointsMapById(e[o[0]]).coordinate,re.getNodeInPointsMapById(e[o[1]]).coordinate))]}(e,t,u):function(t,e,n){var o,a,i=t.split("^").filter(function(t){return re.isStaticNodeById(e[t[0]])&&re.isStaticNodeById(e[t[1]])});t.split("^").forEach(function(t){t.includes(n)?o=t:a=t});var r=e.split("").map(function(t){return re.getNodeInPointsMapById(t).coordinate});if(1===i.length){var c=Y(r[i[0][0]],r[i[0][1]]),s=i[0]===a?o:a,u=s.split("").filter(function(t){return re.isStaticNodeById(e[t])})[0];if(e[a.replace(u,"")]){var d=W(r[u],c);re.updateCoordinate(e[a.replace(u,"")],d)}}else if(0===i.length){var l,p=nt(et(r[n],$(r[a[0]],r[a[1]])),$(r[a[0]],r[a[1]])),f=o.replace(n,"");re.isStaticNodeById(e[f])?(l=W(r[f],p),re.updateCoordinate(e[n],l)):(l=W(r[n],p),re.updateCoordinate(e[f],l));var h=a.split("").filter(function(t){return!re.isStaticNodeById(e[t])})[0];l=W(r[a.replace(h,"")],p),re.updateCoordinate(e[h],l)}}(e,t,u);break;case"=":o=function(t,e,n){var o,a;if(t.split("=").forEach(function(t){2!==t.split("").filter(function(t){return re.isStaticNodeById(e[t])}).length||o?a=t:o=t}),console.log(o,a),o){var i=o.split("").filter(function(t){return re.isStaticNodeById(e[t])}).length;if(i<2)return[];var r=e[a.replace(n,"")],c=Q(re.getNodeInPointsMapById(e[o[0]]).coordinate,re.getNodeInPointsMapById(e[o[1]]).coordinate);if(o.includes(a.replace(n,"")))return[ot(re.getNodeInPointsMapById(r).coordinate,c)]}}(e,t,u)}o&&(d=d.concat(o))}}),"C"===o&&console.log(d),d.forEach(function(t){re.executePointDetails(o,t)}))}}var Tt=[];function zt(t){t.shapes.forEach(function(t){!function(t){var e,n=Object.keys(t).filter(function(t){return"type"!==t})[0],o=t[n].split("").filter(function(t){return t===t.toUpperCase()});if(o=Lt(Object(c.a)(o)),0===re.getData.getPointsMap.length){var a=function(t){var e=[];if(re.getData.getRelationsResult.relations){re.getData.getRelationsResult.relations.forEach(function(t){t.angle&&e.push(t.angle[0])});var n={};e.forEach(function(t){t.split("").forEach(function(t,e){1!==e&&(n[t]?n[t]+=1:n[t]=1)})});var o=t[0];return Object.keys(n).forEach(function(t){n[t]<n[o]&&(o=t)}),o}return t[0]}(t[n]);o=[a].concat(o.filter(function(t){return t!==a}))}e=t.point?o.map(function(e){return Jt(t.point[0],[{id:e,relation:t}])}):o.map(function(e,n){return 0!==n?Jt(e,[{id:o[0],relation:t}]):Jt(e)});e.forEach(function(t){Gt(t,re.getData.getPointsMap)})}(t)}),t.relations.forEach(function(t){(function(t){var e;if(Tt=[],M.forEach(function(e){t[e]&&t[e].forEach(function(t){var n=t.split("").filter(function(t){return t===t.toUpperCase()});(n=Lt(Object(c.a)(n))).map(function(o,a){return a===n.length-1?Jt(o,function(t,e,n){var o=[],a={};return a[t]=e,n.forEach(function(t,e){e!==n.length-1&&o.push({id:t,relation:a})}),o}(e,t,n)):Jt(o)}).forEach(function(t){Gt(t,Tt)})})}),Tt=Object(c.a)(Tt).sort(function(t,e){var n=Ut(t.id,re.getData.getPointsMap),o=Ut(e.id,re.getData.getPointsMap);return-1===n&&-1===o?1:n>=0&&o>=0?n-o:o-n}),t.angle&&"define"===t.outputType&&t.value){var n=Ut(t.angle[0][0],re.getData.getPointsMap),o=Ut(t.angle[0][2],re.getData.getPointsMap);e=[n>o?t.angle[0][0]:t.angle[0][2]]}else e=function(){var t=[],e=Tt[Tt.length-1];e&&(t.push(e.id),e.dependentNodes.forEach(function(e){var n=Ut(e.id,re.getData.getPointsMap);t.includes(e.id)||-1===n||re.getData.getPointsMap[n].isStatic||t.push(e.id)}));return t}();e.length===Tt.length&&(e=[e[0]]);"song song"!==t.relation&&"vu\xf4ng g\xf3c"!==t.relation||(e=e.filter(function(t){return!re.getNodeInPointsMapById(t)}));return e.forEach(function(n){var o=Ut(n,Tt),a=Tt[o];Tt.forEach(function(i){i.id!==n&&(Tt[o]=Object(b.a)({},a,{dependentNodes:[].concat(Object(c.a)(a.dependentNodes),Object(c.a)(Vt(i.id,t,e)))}))})}),Tt})(t).forEach(function(t){Gt(t,re.getData.getPointsMap)})}),re.getData.setPointsMap=re.getData.getPointsMap.map(function(t){return Object(b.a)({},t,{dependentNodes:Ht(t.dependentNodes)})});var e={};return function(){for(re.createPointDetails(),console.table(re.getData.getPointsMap);!re.isPointsMapStatic();){var t=re.getNextExecuteNode();if(!t)break;if(console.log(t.id),At(t),re.getData.getPointDetails.has(t.id)){var e=re.getData.getPointDetails.get(t.id).roots;if("string"===typeof e)return void V.showError("400");if(e.length>0){var n=void 0;re.isNeedRandomCoordinate(t.id)?n=e[T(0,e.length)]:function(){var o=re.getData.getPointDirectionMap[t.id],a=re.getNodeInPointsMapById(o.root).coordinate;if(e.length>1){var i=e.map(function(t){return{coordinate:t,isRight:t.x>a.x,isUp:t.y<a.y}}).map(function(t){var e=0;return t.isRight===o.isRight&&e++,t.isUp===o.isUp&&e++,{coordinate:t.coordinate,matchCount:e}}).sort(function(t,e){return e.matchCount-t.matchCount})[0];n=i.coordinate}else n=e[0]}(),re.updateCoordinate(t.id,n)}}re.getData.getExecutedNode.push(t.id),re.updateStaticNode(),j[Ct]&&j[Ct][wt]&&qt(Dt,Ct,j[Ct][wt],t.id)}re.getData.getPointsMap.forEach(function(t){if(re.getData.getPointDetails.has(t.id)){console.log(re.getData.getPointDetails.get(t.id));var e=re.getData.getPointDetails.get(t.id).roots;if("string"===typeof e)return void V.showError("400");if(e.length>0){var n;if(re.isNeedRandomCoordinate(t.id))n=e[T(0,e.length)];else{var o=re.getData.getPointDirectionMap[t.id],a=re.getNodeInPointsMapById(o.root).coordinate;n=e.length>1?e.map(function(t){return{coordinate:t,isRight:t.x>a.x,isUp:t.y<a.y}}).map(function(t){var e=0;return t.isRight===o.isRight&&e++,t.isUp===o.isUp&&e++,{coordinate:t.coordinate,matchCount:e}}).sort(function(t,e){return e.matchCount-t.matchCount})[0].coordinate:e[0]}re.updateCoordinate(t.id,n)}}}),re.getData.getPointsMap.map(function(t){return{id:t.id,coordinate:t.coordinate}})}(),e.points=re.getData.getPointsMap.map(function(t){return{id:t.id,coordinate:ht(t.coordinate,3)}}),e.segments=[].concat(Object(c.a)(function(t){var e=[];return t.shapes.forEach(function(t){e=e.concat(function(t){for(var e=Object.keys(t).filter(function(t){return"type"!==t})[0],n=t[e].split("").filter(function(t){return t===t.toUpperCase()}),o=[],a=0;a<n.length;a++)a===n.length-1?o.push(n[0]+n[a]):o.push(n[a]+n[a+1]);return o}(t))}),t.relations.forEach(function(t){t.segment&&(e=e.concat(t.segment))}),e.filter(function(t,e,n){return n.indexOf(t)===e})}(t)),Object(c.a)(re.getData.getAdditionSegment)),e}function Ht(t){var e=[];return t.forEach(function(t){for(var n=0;n<e.length;n++)if(JSON.stringify(t)===JSON.stringify(e[n]))return;e.push(t)}),e}function Lt(t){return t.sort(function(t,e){var n=Ut(t,re.getData.getPointsMap),o=Ut(e,re.getData.getPointsMap);return-1===n&&-1===o?1:n>=0&&o>=0?1:o-n})}function Ut(t,e){for(var n=0;n<e.length;n++)if(e[n].id===t)return n;return-1}function Vt(t,e,n){var o=[];return Tt.forEach(function(t){n.includes(t.id)||o.push({id:t.id,relation:e})}),console.log(o),o}function Jt(t,e){var n={id:t,coordinate:{x:void 0,y:void 0,z:0},isStatic:!1},o=e?{dependentNodes:e}:{dependentNodes:[]};return Object(b.a)({},n,o)}function Gt(t,e){var n=Ut(t.id,e);if(-1!==n){var o=e[n];e[n]=Object(b.a)({},o,{dependentNodes:[].concat(Object(c.a)(o.dependentNodes),Object(c.a)(t.dependentNodes))})}else e.push(t),1===re.getData.getPointsMap.length&&(e[0].isStatic=!0)}var Xt,Kt,Ft,Yt,Wt,$t,Qt,Zt,te,ee=n(9),ne=(Xt=function t(e){Object(s.a)(this,t),Object(x.a)(this,"value",Kt,this),Object(x.a)(this,"status",Ft,this),this.value=e},Kt=Object(f.a)(Xt.prototype,"value",[ee.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ft=Object(f.a)(Xt.prototype,"status",[ee.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k.InputStatus.NORMAL}}),Xt),oe=k.Number.NOT_FOUND,ae=k.String.NOT_ENOUGH_SET,ie=new(Yt=function(){function t(e){var n=this;Object(s.a)(this,t),Object(x.a)(this,"circlesData",Wt,this),Object(x.a)(this,"relationsInput",$t,this),this.inputData=[],this.executedInputIndex=void 0,Object(x.a)(this,"executingRelation",Qt,this),this.isNeedRandomCoordinate=function(t){var e=n.data.getPointDetails.get(t).roots;if(e){for(var o=0;o<e.length;o++)if(n.data.getPointDirectionMap[t]||JSON.stringify(ht(e[o]))===JSON.stringify(ht(n.getNodeInPointsMapById(t).coordinate)))return!1;return!0}return!1},this.updateCoordinate=function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,a=n.getIndexOfNodeInPointsMapById(t);e||V.showError("200");var i={};Object.keys(e).sort().forEach(function(t){i[t]=e[t]}),a!==oe&&(n.data.getPointsMap[a].coordinate=ht(i,o))},this.isStaticNode=function(t){if(t.isStatic)return!0;for(var e=0;e<t.dependentNodes.length;e++)if(!n.isExecutedRelation(t.dependentNodes[e].relation))return!1;return n.data.getExecutedNode.includes(t.id)},this.isExecutedRelation=function(t){for(var e=0;e<n.data.getExecutedRelations.length;e++)if(JSON.stringify(t)===JSON.stringify(n.data.getExecutedRelations[e]))return!0;return!1},this.updateStaticNode=function(){var t=n.data.getPointsMap.map(function(t){return t.isStatic=n.isStaticNode(t),t});n.data.setPointsMap=t},this.updatePointsMap=function(t){var e=n.getIndexOfNodeInPointsMapById(t.id);n.data.getPointsMap[e]=t},this.isPointsMapStatic=function(){for(var t=0;t<n.data.getPointsMap.length;t++)if(!n.data.getPointsMap[t].isStatic)return!1;return!0},this.isValidCoordinate=function(t){if(t){var e=n.getNodeInPointsMapById(t);if(e)return void 0!==e.coordinate.x&&void 0!==e.coordinate.y}return!1},this.getNextExecuteNode=function(){var t=n.data.pointsMap.filter(function(t){return!n.data.executedNode.includes(t.id)&&!n.isStaticNode(t)}).sort(n.sortNodeByPriority);return t.length>0?t[0]:null},this.sortNodeByPriority=function(t,e){var o=n.getDependentStaticNodeCount(t),a={static:o,nonStatic:t.dependentNodes.length-o,dependence:t.dependentNodes.length,minRelationIndex:n.getMinIndexOfDependentNodeInRelationsList(t),index:n.getIndexOfNodeInPointsMap(t)},i=n.getDependentStaticNodeCount(e),r={static:i,nonStatic:e.dependentNodes.length-i,dependence:e.dependentNodes.length,minRelationIndex:n.getMinIndexOfDependentNodeInRelationsList(e),index:n.getIndexOfNodeInPointsMap(e)},c=a.static===a.dependence?"1":"0",s=r.static===r.dependence?"1":"0";return["static","dependence"].forEach(function(t){a[t]>r[t]?(c+="1",s+="0"):a[t]===r[t]?(c+="1",s+="1"):(c+="0",s+="1")}),["nonStatic","minRelationIndex","index"].forEach(function(t){a[t]<r[t]?(c+="1",s+="0"):a[t]===r[t]?(c+="1",s+="1"):(c+="0",s+="1")}),parseInt(s)-parseInt(c)},this.getMinIndexOfDependentNodeInRelationsList=function(t){for(var e=[],o=0;o<t.dependentNodes.length;o++)e.push(n.getIndexOfRelationInRelationsList(t.dependentNodes[o]));return Math.min.apply(Math,e)},this.getIndexOfRelationInRelationsList=function(t){for(var e=n.data.getRelationsResult.shapes.concat(n.data.getRelationsResult.relations),o=0;o<e.length;o++)if(t===e[o])return o;return oe},this.getDependentStaticNodeCount=function(t){for(var e=0,o=0;o<t.dependentNodes.length;o++)n.isStaticNodeById(t.dependentNodes[o].id)&&e++;return e},this.getIndexOfNodeInPointsMap=function(t){for(var e=0;e<n.data.getPointsMap.length;e++)if(t===n.data.getPointsMap[e])return e;return oe},this.getIndexOfNodeInPointsMapById=function(t){for(var e=0;e<n.data.getPointsMap.length;e++)if(t===n.data.getPointsMap[e].id)return e;return oe},this.getNodeInPointsMapById=function(t){for(var e=0;e<n.data.getPointsMap.length;e++)if(t===n.data.getPointsMap[e].id)return n.data.getPointsMap[e];return null},this.isStaticNodeById=function(t){for(var e=0;e<n.data.getPointsMap.length;e++)if(t===n.data.getPointsMap[e].id)return n.isStaticNode(n.data.getPointsMap[e]);return!1},this._calculateSet=function(t){return 2===t.length?lt(t[0],t[1]):ae},this.data=e,this.relationsInput=[new ne]}return Object(u.a)(t,[{key:"resetInputsStatus",value:function(){this.relationsInput.forEach(function(t){t.status=k.InputStatus.NORMAL})}},{key:"onInputChange",value:function(t,e){var n=Object(b.a)({},this.relationsInput[e]);n.value=t,this.relationsInput[e]=n,this.resetInputsStatus()}},{key:"addNewInput",value:function(){this.relationsInput.push(new ne(""))}},{key:"removeInput",value:function(t){this.relationsInput.splice(t,1)}},{key:"clear",value:function(){this.data.clear()}},{key:"createPointDetails",value:function(){var t=this;this.data.getPointsMap.forEach(function(e){var n=t.isValidCoordinate(e.coordinate)?[e.coordinate]:[];t._updatePointDetails(e.id,{setOfEquation:[],roots:n,exceptedCoordinates:[]})})}},{key:"replaceSetOfEquation",value:function(t,e,n){var o=this.data.getPointDetails.get(t),a=o.setOfEquation,i=!1;if(a.forEach(function(t,o){0===gt(t,e)&&(a[o]=n,i=!0)}),i||a.push(n),1!==a.length){var r=this._calculateSet(a);if(this.data.getPointDetails.set(t,Object(b.a)({},o,{setOfEquation:a,roots:r})),r.length>0){var c;if(ie.isNeedRandomCoordinate(t))c=r[T(0,r.length)];else{var s=ie.getData.getPointDirectionMap[t],u=ie.getNodeInPointsMapById(s.root).coordinate;if(r.length>1&&"string"!==typeof r){c=r.map(function(t){return{coordinate:t,isRight:t.x>u.x,isUp:t.y<u.y}}).map(function(t){var e=0;return t.isRight===s.isRight&&e++,t.isUp===s.isUp&&e++,{coordinate:t.coordinate,matchCount:e}}).sort(function(t,e){return e.matchCount-t.matchCount})[0].coordinate}else{if("string"===typeof r)return;c=r[0]}}ie.updateCoordinate(t,c)}}}},{key:"_updatePointDetails",value:function(t,e){this.data.getPointDetails.set(t,{setOfEquation:e.setOfEquation,roots:e.roots,exceptedCoordinates:e.exceptedCoordinates})}},{key:"uniqueSetOfEquation",value:function(t){var e=[];return t.forEach(function(t){for(var n=0;n<e.length;n++)if(JSON.stringify(t)===JSON.stringify(e[n]))return;e.push(t)}),e}},{key:"executePointDetails",value:function(t,e){var n=!1;if(this.data.getPointDetails.has(t)||this._updatePointDetails(t,{setOfEquation:[],roots:[],exceptedCoordinates:[]}),this.data.getPointDetails.get(t).setOfEquation.length<=1&&(this._updatePointDetails(t,{setOfEquation:[].concat(Object(c.a)(this.data.getPointDetails.get(t).setOfEquation),[e]),roots:this.data.getPointDetails.get(t).roots,exceptedCoordinates:this.data.getPointDetails.get(t).exceptedCoordinates}),n=!0),2===this.data.getPointDetails.get(t).setOfEquation.length){if(bt(e)&&!n)for(var o=0;o<2;o++)if(!bt(this.data.getPointDetails.get(t).setOfEquation[o])){this.data.getPointDetails.get(t).setOfEquation[o]=e;break}var a=this._calculateSet(this.data.getPointDetails.get(t).setOfEquation),i=this.data.getPointDetails.get(t).roots,r="string"===typeof a?i:i.concat(a);this._updatePointDetails(t,{setOfEquation:this.data.getPointDetails.get(t).setOfEquation,roots:r,exceptedCoordinates:this.data.getPointDetails.get(t).exceptedCoordinates})}var s=this.data.getPointDetails.get(t).roots;if("string"!==typeof s){if((s=s.filter(function(t){return ut(t,e)})).length>0&&(this._updatePointDetails(t,{setOfEquation:this.data.getPointDetails.get(t).setOfEquation,roots:s,exceptedCoordinates:this.data.getPointDetails.get(t).exceptedCoordinates}),s.length>0)){var u;if(ie.isNeedRandomCoordinate(t))u=s[T(0,s.length)];else{var d=ie.getData.getPointDirectionMap[t],l=ie.getNodeInPointsMapById(d.root).coordinate;if(s.length>1)u=s.map(function(t){return{coordinate:t,isRight:t.x>l.x,isUp:t.y<l.y}}).map(function(t){var e=0;return t.isRight===d.isRight&&e++,t.isUp===d.isUp&&e++,{coordinate:t.coordinate,matchCount:e}}).sort(function(t,e){return e.matchCount-t.matchCount})[0].coordinate;else u=s[0]}console.log(u),ie.updateCoordinate(t,u)}}else V.showError("500")}},{key:"getInformation",value:function(t){var e=this,n="_ ".concat(t.concat(" _")),o=!1,a=[];Object.keys(O).forEach(function(t){O[t].forEach(function(i){if(i="_ ".concat(i.concat(" _")),!o){var r=e.getBasicInformation(n,i,t);Object.keys(r).length>0&&(o=!0,(a=r).outputType=t)}})});var i=a.outputType,r=jt(a);if(!r.Error&&r.outputType){if(!(r.point&&r.point.length>3))return"define"===i&&k.Others.OPERATIONS.forEach(function(e){r.operation||t.includes(e)&&(r.operation=e,"="!==e||r.value||(r.value="1",r.operation="*"))}),r;V.showError("301")}else V.showError("300")}},{key:"getBasicInformation",value:function(t,e,n){var o=e.match(new RegExp(k.Regex.OTHER,"g")),a=e.match(new RegExp(k.Regex.KEY,"g")),i={};a.forEach(function(t){i[t]=[]});for(var r=0;r<a.length;r++){var c=o[r].replace("+","\\+").replace("-","\\-").replace("*","\\*")||"",s=o[r+1].replace("+","\\+").replace("-","\\-").replace("*","\\*")||"",u=t.match(new RegExp(c+"(.*)"+s));if(u&&i[a[r]].push(u[1]),r===o.length-1){var d=t.match(new RegExp(s+"(.*)"));d&&i[a[r+1]].push(d[1])}}return this.getLength(i)===a.length?("relation"===n&&(i[n]=o[1].replace("_","").trim()),i):[]}},{key:"getLength",value:function(t){var e=0;return Object.keys(t).forEach(function(n){e+=t[n].length}),e}},{key:"getCircleEquation",value:function(t){return this.circlesData[t].equation}},{key:"getCircleCenterCoordinate",value:function(t){return this.circlesData[t].coordinate}},{key:"isCoordinateDuplicated",value:function(t){var e=this,n=JSON.stringify(t),o=!1;return this.getData.pointsMap.forEach(function(t){var a=t.id;o||JSON.stringify(n)===JSON.stringify(e.getNodeInPointsMapById(a).coordinate)&&(o=!0)}),o}},{key:"analyzeInput",value:function(){var t=this;this.circlesData={};for(var e=this.RelationsInput.map(function(t){return t.value}).filter(function(t){return!!t}).map(function(e,n){t.executedInputIndex=n;var o=t.getInformation(e);return t.relationsInput[n].status=k.InputStatus.SUCCESS,t.inputData.push(o),o}),n={shapes:[],relations:[]},o=0;o<e.length;o++){var a=e[o];"shape"===a.outputType?n.shapes.push(a):n.relations.push(a)}return this.data.setRelationsResult=n,this.RelationsInput.forEach(function(t){t.status=k.InputStatus.SUCCESS}),zt(n)}},{key:"RelationsInput",get:function(){return this.relationsInput}},{key:"isInputEmpty",get:function(){return 1===this.relationsInput.length&&!this.relationsInput[0].value}},{key:"getData",get:function(){return this.data}}]),t}(),Wt=Object(f.a)(Yt.prototype,"circlesData",[ee.i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),$t=Object(f.a)(Yt.prototype,"relationsInput",[ee.i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qt=Object(f.a)(Yt.prototype,"executingRelation",[ee.i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(f.a)(Yt.prototype,"RelationsInput",[ee.d],Object.getOwnPropertyDescriptor(Yt.prototype,"RelationsInput"),Yt.prototype),Object(f.a)(Yt.prototype,"isInputEmpty",[ee.d],Object.getOwnPropertyDescriptor(Yt.prototype,"isInputEmpty"),Yt.prototype),Object(f.a)(Yt.prototype,"resetInputsStatus",[ee.c],Object.getOwnPropertyDescriptor(Yt.prototype,"resetInputsStatus"),Yt.prototype),Object(f.a)(Yt.prototype,"onInputChange",[ee.c],Object.getOwnPropertyDescriptor(Yt.prototype,"onInputChange"),Yt.prototype),Object(f.a)(Yt.prototype,"addNewInput",[ee.c],Object.getOwnPropertyDescriptor(Yt.prototype,"addNewInput"),Yt.prototype),Object(f.a)(Yt.prototype,"removeInput",[ee.c],Object.getOwnPropertyDescriptor(Yt.prototype,"removeInput"),Yt.prototype),Yt)(I),re=ie,ce=(n(74),n(57)),se=n.n(ce),ue=Object.freeze({BACKSPACE:8,ENTER:13}),de=(Zt=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(d.a)(this,Object(l.a)(e).call(this,t))).inputRef=o.createRef(),n.state={shouldRemove:!0,isEmpty:!0},n}return Object(p.a)(e,t),Object(u.a)(e,[{key:"focus",value:function(){this.inputRef.current&&this.inputRef.current.focus()}},{key:"onChange",value:function(t){var e=t.currentTarget.value,n=this.props.onValueChange;0===e.length?this.state.isEmpty||this.setState({isEmpty:!0}):this.setState({isEmpty:!1,shouldRemove:!1}),n&&n(e)}},{key:"onKeyUp",value:function(t){var e=this.props,n=e.onBackspace,o=e.onSubmit;e.value;if(t.keyCode===ue.ENTER)o&&o();else if(t.keyCode===ue.BACKSPACE){if(this.state.isEmpty&&!this.state.shouldRemove)return void this.setState({shouldRemove:!0});n&&n()}}},{key:"render",value:function(){var t=this.props,e=t.status,n=t.value;return o.createElement("div",{className:"input-item"},o.createElement("div",{className:"input-group input-container"},o.createElement("div",{className:"input-group-prepend input-status"},o.createElement("span",{className:"input-group-text ".concat(e.toLowerCase()),id:"basic-addon1"},o.createElement(pe,{width:15,height:15,name:"input".concat(e),color:se.a["input".concat(e)]}))),o.createElement("input",{type:"text",ref:this.inputRef,onChange:this.onChange,onKeyUp:this.onKeyUp,value:n,className:"form-control ".concat(e.toLowerCase()),"aria-describedby":"basic-addon1"})))}}]),e}(o.Component),Object(f.a)(Zt.prototype,"onChange",[g.a],Object.getOwnPropertyDescriptor(Zt.prototype,"onChange"),Zt.prototype),Object(f.a)(Zt.prototype,"onKeyUp",[g.a],Object.getOwnPropertyDescriptor(Zt.prototype,"onKeyUp"),Zt.prototype),Zt),le={inputSuccess:{svg:function(t){return a.a.createElement("path",{fill:t.color,d:"M337.222 22.952c-15.912-8.568-33.66 7.956-44.064 17.748-23.867 23.256-44.063 50.184-66.708 74.664-25.092 26.928-48.348 53.856-74.052 80.173-14.688 14.688-30.6 30.6-40.392 48.96-22.032-21.421-41.004-44.677-65.484-63.648C28.774 167.385-.602 157.593.01 190.029c1.224 42.229 38.556 87.517 66.096 116.28 11.628 12.24 26.928 25.092 44.676 25.704 21.42 1.224 43.452-24.48 56.304-38.556 22.645-24.48 41.005-52.021 61.812-77.112 26.928-33.048 54.468-65.485 80.784-99.145 16.524-20.808 68.544-72.217 27.54-94.248zM26.937 187.581c-.612 0-1.224 0-2.448.611-2.448-.611-4.284-1.224-6.732-2.448 1.836-1.224 4.896-.612 9.18 1.837z"})},viewBox:"0 0 352.62 352.62"},inputError:{svg:function(t){return a.a.createElement("path",{fill:t.color,d:"M285.368 234.691L459.36 60.697c13.895-13.88 13.895-36.395 0-50.275-13.881-13.895-36.38-13.895-50.275 0L235.091 184.416 61.082 10.421c-13.866-13.895-36.395-13.895-50.275 0-13.88 13.881-13.88 36.395 0 50.275l174.01 173.995L10.421 409.085c-13.895 13.895-13.895 36.395 0 50.275 6.94 6.955 16.043 10.425 25.145 10.425 9.088 0 18.19-3.47 25.132-10.425L235.09 284.967l173.995 173.995c6.955 6.94 16.043 10.425 25.145 10.425 9.088 0 18.19-3.485 25.131-10.425 13.895-13.88 13.895-36.38 0-50.275L285.367 234.691z"})},viewBox:"0 0 469.785 469.785"},inputNormal:{svg:function(t){return a.a.createElement("g",null,a.a.createElement("path",{fill:t.color,d:"M370.59 250.973c-5.524 0-10 4.476-10 10v88.789c-.02 16.562-13.438 29.984-30 30H50c-16.563-.016-29.98-13.438-30-30V89.172c.02-16.559 13.438-29.98 30-30h88.79c5.523 0 10-4.477 10-10 0-5.52-4.477-10-10-10H50c-27.602.031-49.969 22.398-50 50v260.594c.031 27.601 22.398 49.968 50 50h280.59c27.601-.032 49.969-22.399 50-50v-88.793c0-5.524-4.477-10-10-10zm0 0"}),a.a.createElement("path",{fill:t.color,d:"M376.629 13.441c-17.574-17.574-46.067-17.574-63.64 0L134.581 191.848a9.997 9.997 0 0 0-2.566 4.402l-23.461 84.7a9.997 9.997 0 0 0 12.304 12.308l84.7-23.465a9.997 9.997 0 0 0 4.402-2.566l178.402-178.41c17.547-17.587 17.547-46.055 0-63.641zM156.37 198.348L302.383 52.332l47.09 47.09-146.016 146.016zm-9.406 18.875l37.62 37.625-52.038 14.418zM374.223 74.676L363.617 85.28l-47.094-47.094 10.61-10.605c9.762-9.762 25.59-9.762 35.351 0l11.739 11.734c9.746 9.774 9.746 25.59 0 35.36zm0 0"}))},viewBox:"0 0 352.62 352.62"},icInformation:{svg:function(t){return a.a.createElement("g",null,a.a.createElement("path",{fill:t.color,d:"M194 142.8c.8 1.6 1.6 3.2 2.4 4.4.8 1.2 2 2.4 2.8 3.6 1.2 1.2 2.4 2.4 4 3.6 1.2.8 2.8 2 4.8 2.4 1.6.8 3.2 1.2 5.2 1.6 2 .4 3.6.4 5.2.4s3.6 0 5.2-.4 3.2-.8 4.4-1.6h.4c1.6-.8 3.2-1.6 4.8-2.8 1.2-.8 2.4-2 3.6-3.2l.4-.4c1.2-1.2 2-2.4 2.8-3.6s1.6-2.4 2-4c0-.4 0-.4.4-.8.8-1.6 1.2-3.6 1.6-5.2.4-1.6.4-3.6.4-5.2s0-3.6-.4-5.2-.8-3.2-1.6-5.2c-1.2-2.8-2.8-5.2-4.8-7.2l-.8-.8c-1.2-1.2-2.4-2-4-3.2-1.6-.8-2.8-1.6-4.4-2.4-1.6-.8-3.2-1.2-4.8-1.6-2-.4-3.6-.4-5.2-.4s-3.6 0-5.2.4-3.2.8-4.8 1.6h-.4c-1.6.8-3.2 1.6-4.4 2.4-1.6 1.2-2.8 2-4 3.2-1.2 1.2-2.4 2.4-3.2 3.6-.8 1.2-1.6 2.8-2.4 4.4-.8 1.6-1.2 3.2-1.6 4.8-.4 2-.4 3.6-.4 5.2s0 3.6.4 5.2c.4 3.2 1.2 4.8 1.6 6.4zM249.6 289.2h-9.2v-98c0-5.6-4.4-10.4-10.4-10.4h-42c-5.6 0-10.4 4.4-10.4 10.4v21.6c0 5.6 4.4 10.4 10.4 10.4h8.4v66.4H188c-5.6 0-10.4 4.4-10.4 10.4v21.6c0 5.6 4.4 10.4 10.4 10.4h61.6c5.6 0 10.4-4.4 10.4-10.4V300c0-6-4.8-10.8-10.4-10.8z"}),a.a.createElement("path",{fill:t.color,d:"M218.8 0C98 0 0 98 0 218.8s98 218.8 218.8 218.8 218.8-98 218.8-218.8S339.6 0 218.8 0zm0 408.8c-104.8 0-190-85.2-190-190s85.2-190 190-190 190 85.2 190 190-85.2 190-190 190z"}))},viewBox:"0 0 437.6 427.6"},icRemove:{svg:function(t){return a.a.createElement("g",null,a.a.createElement("path",{fill:t.color||"#dcdcdc",d:"M465.167 211.613H26.69c-8.424 0-26.69 11.439-26.69 34.316s18.267 34.316 26.69 34.316H465.169c8.421 0 26.689-11.439 26.689-34.316s-18.268-34.316-26.691-34.316z"}))},viewBox:"0 0 491.858 491.858"},icEdit:{svg:function(t){return a.a.createElement("g",null,a.a.createElement("path",{fill:t.color||"#dcdcdc",d:"M328.883 89.125l107.59 107.589-272.34 272.34L56.604 361.465l272.279-272.34zm189.23-25.948l-47.981-47.981c-18.543-18.543-48.653-18.543-67.259 0l-45.961 45.961 107.59 107.59 53.611-53.611c14.382-14.383 14.382-37.577 0-51.959zM.3 512.69c-1.958 8.812 5.998 16.708 14.811 14.565l119.891-29.069L27.473 390.597.3 512.69z"}))},viewBox:"0 0 528.899 528.899"},icAdd:{svg:function(t){return a.a.createElement("g",null,a.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M34.525 19.11l.398.038a17.705 17.705 0 000-3.296l-.398.037-.398.038a16.903 16.903 0 010 3.146l.398.038zm-.333-5.342l.39-.087a17.364 17.364 0 00-1.017-3.133l-.367.16-.367.158c.413.954.74 1.953.97 2.989l.39-.087zm-1.97-4.974l.343-.203a17.556 17.556 0 00-1.938-2.664l-.3.265-.3.264a16.76 16.76 0 011.85 2.542l.344-.204zm-3.414-4.121l.265-.3a17.551 17.551 0 00-2.663-1.938l-.204.344-.204.344a16.755 16.755 0 012.542 1.85l.264-.3zm-4.515-2.87l.159-.368c-1-.433-2.047-.775-3.133-1.017l-.087.39-.087.39c1.036.231 2.035.558 2.989.971l.159-.367zM19.11.474l.037-.398a17.718 17.718 0 00-3.296 0l.037.398.038.398a16.919 16.919 0 013.146 0l.038-.398zm-5.343.333l-.087-.39a17.365 17.365 0 00-3.133 1.017l.16.367.158.367c.954-.413 1.953-.74 2.989-.97l-.087-.39zm-4.974 1.97l-.203-.343c-.95.562-1.841 1.212-2.664 1.938l.265.3.264.3a16.756 16.756 0 012.542-1.85l-.204-.344zM4.673 6.193l-.3-.265a17.556 17.556 0 00-1.938 2.664l.344.203.344.204a16.756 16.756 0 011.85-2.542l-.3-.264zm-2.87 4.515l-.368-.159c-.433 1-.775 2.047-1.017 3.133l.39.087.39.087c.231-1.036.558-2.036.971-2.989l-.367-.159zM0 17.5c0-.556.026-1.105.077-1.648l.398.037.398.038a16.919 16.919 0 000 3.146l-.398.038-.398.037A17.718 17.718 0 010 17.5zm.808 3.732l-.39.087a17.365 17.365 0 001.017 3.133l.367-.16.367-.158a16.565 16.565 0 01-.97-2.989l-.39.087zm1.97 4.974l-.343.204a17.55 17.55 0 001.938 2.663l.3-.265.3-.264a16.755 16.755 0 01-1.85-2.542l-.344.204zm3.414 4.121l-.265.3a17.556 17.556 0 002.664 1.938l.203-.344.204-.344a16.76 16.76 0 01-2.542-1.85l-.264.3zm4.515 2.87l-.159.368c1 .433 2.047.775 3.133 1.017l.087-.39.087-.39a16.563 16.563 0 01-2.989-.971l-.159.367zm5.182 1.328l-.037.398a17.705 17.705 0 003.296 0l-.037-.398-.038-.398a16.903 16.903 0 01-3.146 0l-.038.398zm5.343-.333l.087.39a17.364 17.364 0 003.133-1.017l-.16-.367-.158-.367c-.954.413-1.953.74-2.989.97l.087.39zm4.974-1.97l.204.343c.949-.562 1.84-1.212 2.663-1.938l-.265-.3-.264-.3a16.76 16.76 0 01-2.542 1.85l.204.344zm4.121-3.414l.3.265a17.552 17.552 0 001.938-2.663l-.344-.204-.344-.204a16.76 16.76 0 01-1.85 2.542l.3.264zm2.87-4.515l.368.159c.433-1 .775-2.047 1.017-3.133l-.39-.087-.39-.087a16.563 16.563 0 01-.971 2.989l.367.159zM17.7 9.723a.5.5 0 01.5.5V17h7a.5.5 0 010 1h-7v6.778a.5.5 0 01-1 0V18h-7a.5.5 0 010-1h7v-6.778a.5.5 0 01.5-.5z",fill:t.color||"#dcdcdc"}))},viewBox:"0 0 35 35"}},pe=function(t){function e(){return Object(s.a)(this,e),Object(d.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props,e=t.name,n=t.width,a=t.height,i=t.color,r=le[e];return o.createElement("svg",{width:n,height:a,viewBox:r.viewBox},r.svg({color:i}))}}]),e}(o.Component),fe=n(58),he=n.n(fe),ge=n(108),ye=n(32),ve=(n(80),te=function(t){function e(t){var n;Object(s.a)(this,e),n=Object(d.a)(this,Object(l.a)(e).call(this,t));var o=t.value?t.value.name[0]:"",a=t.value?t.value.name[1]:"";return n.state={start:o,end:a,visible:!0,isEditMode:!t.value,isCreateMode:!t.value,isMouseHoverEdition:!1,isMouseHoverDeletion:!1},n}return Object(p.a)(e,t),Object(u.a)(e,[{key:"onDone",value:function(){var t=this.state,e=t.start,n=t.end,o=this.props.onDone;o&&o({name:[e,n].sort().join(""),visible:!0}),this.setState({isEditMode:!1})}},{key:"onDelete",value:function(){var t=this.props.onDelete;t&&t()}},{key:"onVisibleChange",value:function(t){var e=this.props,n=e.onVisibleChange,o=e.value;n&&n({name:o.name,visible:!o.visible})}},{key:"getIndexInData",value:function(t,e){var n=this.props.data.indexOf(e);return n<0?t:n>t?t:parseInt(t)+1}},{key:"onStartPointSelect",value:function(t){var e=this.props.data,n=this.state,o=n.start,a=n.end,i=e[t];i===a?this.setState({start:i,end:o}):this.setState({start:i})}},{key:"onEndPointSelect",value:function(t){var e=this.props.data;this.setState({end:e[this.getIndexInData(t,this.state.start)]})}},{key:"mouseHoverEdition",value:function(){this.setState({isMouseHoverEdition:!0})}},{key:"mouseLeaveEdition",value:function(){this.setState({isMouseHoverEdition:!1})}},{key:"mouseHoverDeletion",value:function(){this.setState({isMouseHoverDeletion:!0})}},{key:"mouseLeaveDeletion",value:function(){this.setState({isMouseHoverDeletion:!1})}},{key:"onChangeContentState",value:function(){var t=this.state,e=t.isEditMode,n=t.start,o=t.end;n&&o&&this.setState({isEditMode:!e})}},{key:"renderDropdown",value:function(t,e,n){return o.createElement(ge.a,{title:t||"Ch\u1ecdn \u0111i\u1ec3m",id:"segment-dropdown",onSelect:n},e.map(function(t,e){return o.createElement(ye.a.Item,{key:"Drop-item-".concat(e),eventKey:"".concat(e)},t)}))}},{key:"renderEditContent",value:function(){var t=this,e=this.props.data,n=this.state,a=n.start,i=n.end,r=n.isCreateMode;return o.createElement("div",{className:"content-edit"},o.createElement("div",{className:"drop-down-container"},o.createElement("div",{className:"col-6 p-0"},this.renderDropdown(a,e,this.onStartPointSelect)),o.createElement("div",{className:"col-6 p-0 right-drop-down"},this.renderDropdown(i,e.filter(function(e){return e!==t.state.start}),this.onEndPointSelect))),o.createElement("div",{className:"button-container mt-1"},o.createElement("div",{className:"col-6 p-0 d-flex justify-content-between"},o.createElement(m.a,{className:"btn-cancel",onClick:r?this.onDelete:this.onChangeContentState},"H\u1ee6Y"),o.createElement(m.a,{className:"btn-update",variant:"".concat(r?"link":"success"),disabled:!(a&&i),onClick:this.onDone},r?"TH\xcaM":"C\u1eacP NH\u1eacT"))))}},{key:"renderShowContent",value:function(){var t=this.props.value,e=t.name,n=t.visible;return o.createElement("div",{className:"content-show"},o.createElement("div",{className:"content"},o.createElement("div",{className:"segment-edit-name col-8"},o.createElement("p",null,e)),o.createElement("div",{className:"segment-edit-controller col-4"},o.createElement(he.a,{onstyle:"success",offstyle:"danger",handleClassName:"toggle-handler",onClick:this.onVisibleChange,off:"HI\u1ec6N",on:"\u1ea8N",active:n}),o.createElement("div",{onClick:this.onChangeContentState,onMouseLeave:this.mouseLeaveEdition,onMouseOver:this.mouseHoverEdition,onMouseDown:this.mouseLeaveEdition},this.state.isMouseHoverEdition?o.createElement(pe,{name:"icEdit",color:"#218838",width:16,height:16}):o.createElement(pe,{name:"icEdit",color:"#757575",width:16,height:16})),o.createElement("div",{onClick:this.onDelete,onMouseOver:this.mouseHoverDeletion,onMouseLeave:this.mouseLeaveDeletion,onMouseDown:this.mouseLeaveDeletion},this.state.isMouseHoverDeletion?o.createElement(pe,{name:"icRemove",color:"#dc3545",width:16,height:16}):o.createElement(pe,{name:"icRemove",color:"#757575",width:16,height:16})))))}},{key:"renderContent",value:function(){return this.state.isEditMode?this.renderEditContent():this.renderShowContent()}},{key:"render",value:function(){var t=this.props.style,e=this.state,n=e.isEditMode,a=e.isCreateMode;return o.createElement("div",{className:"segment-setting",style:Object(b.a)({},t)},o.createElement("div",{className:"container"},n&&o.createElement("div",{className:"title"},o.createElement("p",null,"".concat(a?"Th\xeam":"C\u1eadp nh\u1eadt"," \u0111o\u1ea1n th\u1eb3ng :"))),this.renderContent()))}}]),e}(o.Component),Object(f.a)(te.prototype,"onDone",[g.a],Object.getOwnPropertyDescriptor(te.prototype,"onDone"),te.prototype),Object(f.a)(te.prototype,"onDelete",[g.a],Object.getOwnPropertyDescriptor(te.prototype,"onDelete"),te.prototype),Object(f.a)(te.prototype,"onVisibleChange",[g.a],Object.getOwnPropertyDescriptor(te.prototype,"onVisibleChange"),te.prototype),Object(f.a)(te.prototype,"getIndexInData",[g.a],Object.getOwnPropertyDescriptor(te.prototype,"getIndexInData"),te.prototype),Object(f.a)(te.prototype,"onStartPointSelect",[g.a],Object.getOwnPropertyDescriptor(te.prototype,"onStartPointSelect"),te.prototype),Object(f.a)(te.prototype,"onEndPointSelect",[g.a],Object.getOwnPropertyDescriptor(te.prototype,"onEndPointSelect"),te.prototype),Object(f.a)(te.prototype,"mouseHoverEdition",[g.a],Object.getOwnPropertyDescriptor(te.prototype,"mouseHoverEdition"),te.prototype),Object(f.a)(te.prototype,"mouseLeaveEdition",[g.a],Object.getOwnPropertyDescriptor(te.prototype,"mouseLeaveEdition"),te.prototype),Object(f.a)(te.prototype,"mouseHoverDeletion",[g.a],Object.getOwnPropertyDescriptor(te.prototype,"mouseHoverDeletion"),te.prototype),Object(f.a)(te.prototype,"mouseLeaveDeletion",[g.a],Object.getOwnPropertyDescriptor(te.prototype,"mouseLeaveDeletion"),te.prototype),Object(f.a)(te.prototype,"onChangeContentState",[g.a],Object.getOwnPropertyDescriptor(te.prototype,"onChangeContentState"),te.prototype),Object(f.a)(te.prototype,"renderDropdown",[g.a],Object.getOwnPropertyDescriptor(te.prototype,"renderDropdown"),te.prototype),Object(f.a)(te.prototype,"renderEditContent",[g.a],Object.getOwnPropertyDescriptor(te.prototype,"renderEditContent"),te.prototype),Object(f.a)(te.prototype,"renderShowContent",[g.a],Object.getOwnPropertyDescriptor(te.prototype,"renderShowContent"),te.prototype),Object(f.a)(te.prototype,"renderContent",[g.a],Object.getOwnPropertyDescriptor(te.prototype,"renderContent"),te.prototype),te),me=n(27),be=n(20),xe=function(){function t(e){Object(s.a)(this,t),this.name=e}return Object(u.a)(t,[{key:"toString",value:function(){return this.name}}]),t}(),Ie=function(t){function e(t,n,o){var a;return Object(s.a)(this,e),"undefined"===typeof o&&(o=n,n=t,t=null),(a=Object(d.a)(this,Object(l.a)(e).call(this,t))).x=n,a.y=o,a.free=!0,a}return Object(p.a)(e,t),Object(u.a)(e,[{key:"toString",value:function(){return Object(be.a)(Object(l.a)(e.prototype),"toString",this).call(this)+"("+this.x+","+this.y+")"}}],[{key:"P",value:function(t,n,o){return new e(t,n,o)}}]),e}(xe);function Oe(t,e){return Math.sqrt(Ne(t,e))}function Ne(t,e){var n=t.x-e.x,o=t.y-e.y;return n*n+o*o}var Ee=function(t){function e(t,n,o){var a;return Object(s.a)(this,e),"undefined"===typeof o&&(o=n,n=t,t=null),(a=Object(d.a)(this,Object(l.a)(e).call(this,t))).center=n,o instanceof Ie?a._fromCenterAndBoundaryPoint(n,o):"number"===typeof o&&a._fromCenterAndRadius(n,o),a}return Object(p.a)(e,t),Object(u.a)(e,[{key:"_fromCenterAndRadius",value:function(t,e){this.radius=e,Object.defineProperties(this,{radiussq:{get:function(){return this.radius*this.radius}}})}},{key:"_fromCenterAndBoundaryPoint",value:function(t,e){this.boundaryPoint=e,Object.defineProperties(this,{radius:{get:function(){return Oe(this.boundaryPoint,this.center)}},radiussq:{get:function(){return Ne(this.boundaryPoint,this.center)}}})}},{key:"y",value:function(t){var e=Math.abs(t-this.center.x);if(e>this.radius)return null;if(e===this.radius)return new Ie(t,this.center.y);var n=Math.sqrt(this.radius*this.radius-e*e);return[this.center.y+n,this.center.y-n]}},{key:"contains",value:function(t){return Ne(t,this.center)===this.radiussq}},{key:"toString",value:function(){return"Circle"+Object(be.a)(Object(l.a)(e.prototype),"toString",this).call(this)+"["+this.center.toString()+";"+this.radius+"]"}}]),e}(xe),Me=n(25),Pe=function(t){function e(t,n,o){var a;return Object(s.a)(this,e),"undefined"===typeof o&&(o=n,n=t,t=null),(a=Object(d.a)(this,Object(l.a)(e).call(this,t)))._p=o?[n,o]:n.slice(0),a._clip=!1,Object.defineProperties(Object(Me.a)(a),{dx:{get:function(){return this._p[1].x-this._p[0].x}},dy:{get:function(){return this._p[1].y-this._p[0].y}},theta:{get:function(){return Math.atan2(this.dy,this.dx)}},m:{get:function(){return 0===this.dx?null:this.dy/this.dx}},left:{get:function(){return this._clip?Math.min(this._p[0].x,this._p[1].x):null}},right:{get:function(){return this._clip?Math.max(this._p[0].x,this._p[1].x):null}},top:{get:function(){return this._clip?Math.min(this._p[0].y,this._p[1].y):null}},bottom:{get:function(){return this._clip?Math.max(this._p[0].y,this._p[1].y):null}}}),a}return Object(p.a)(e,t),Object(u.a)(e,[{key:"y",value:function(t){return 0===this.dx||this._clip&&(this.left>t||this.right<t)?null:this._p[0].y+(t-this._p[0].x)*this.dy/this.dx}},{key:"x",value:function(t){return 0===this.dy||this._clip&&(this.top>t||this.bottom<t)?null:this._p[0].x+(t-this._p[0].y)*this.dx/this.dy}},{key:"contains",value:function(t){return(0!==this.dx?this.y(t.x)===t.y:this.x(t.y)===t.x)&&(!this._clip||this.left<=t.x&&t.x<=this.right&&this.top<=t.y&&t.y<=this.bottom)}},{key:"toString",value:function(){return"Line"+Object(be.a)(Object(l.a)(e.prototype),"toString",this).call(this)+"["+this._p[0].toString()+";"+this._p[1].toString()+"]"}}]),e}(xe),je=n(28),Se=Ie.P,De=function(t){function e(t,n,o){var a;return Object(s.a)(this,e),(a=Object(d.a)(this,Object(l.a)(e).call(this,t,n,o)))._clip=!0,Object.defineProperties(Object(Me.a)(a),{p:{get:function(){return[].concat(this._p)}},lengthsq:{get:function(){return Ne(this._p[0],this._p[1])}},length:{get:function(){return Oe(this._p[0],this._p[1])}}}),a}return Object(p.a)(e,t),Object(u.a)(e,[{key:"toString",value:function(){return"Segment"+Object(be.a)(Object(l.a)(e.prototype),"toString",this).call(this)}}],[{key:"clip",value:function(t,n){var o=Object(je.a)(n._p,2),a=o[0],i=o[1],r=n.y(t.left),c=n.y(t.right),s=n.x(t.top),u=n.x(t.bottom);if(a.x>i.x){var d=a;a=i,i=d}if(r&&r>=t.top&&r<=t.bottom&&(a=Se(t.left,r)),c&&c>=t.top&&c<=t.bottom&&(i=Se(t.right,c)),a.y>i.y){var l=a;a=i,i=l}s&&s>=t.left&&s<=t.right&&(a=Se(s,t.top)),u&&u>=t.left&&u<=t.right&&(i=Se(u,t.bottom));var p=new e(null,a,i);return p.parent=n,p}}]),e}(Pe),Ce=n(44),we=n.n(Ce),ke=Ie.P;function Be(t,e){return t.x===e.x&&t.y===e.y?0:1}function Re(t){return t*t}function _e(t,e,n){var o=Math.min(e,n),a=Math.max(e,n);return o<=t&&t<=a}function Ae(t,e){if(t instanceof Ee&&e instanceof Ee)return function(t,e){var n=Ne(t.center,e.center),o=Math.sqrt(n);if(o>t.radius+e.radius)return[];if(o<t.radius-e.radius)return[];if(0===n)return[];var a=(t.radiussq-e.radiussq+n)/(2*o),i=Math.sqrt(Math.max(t.radiussq-Re(a),0)),r=t.center.x+a*(e.center.x-t.center.x)/o,c=t.center.y+a*(e.center.y-t.center.y)/o,s=i*(t.center.y-e.center.y)/o,u=i*(t.center.x-e.center.x)/o;return we()([ke(0,r+s,c-u),ke(1,r-s,c+u)],Be)}(t,e);if(e instanceof Ee)return Ae(e,t);if(t instanceof Ee&&e instanceof De)return Te(t,e,!0);if(t instanceof Ee&&e instanceof Pe)return Te(t,e,!1);if(t instanceof De&&e instanceof De)return qe(t,e,!0);if(e instanceof De)return Ae(e,t);if(t instanceof Pe&&e instanceof Pe)return qe(t,e,!1);if(e instanceof Ie||t instanceof Ie)return[];throw new Error("Cannot intersect "+t.constructor.name+" and "+e.constructor.name)}function qe(t,e,n){var o=Object(je.a)(t._p,2),a=o[0],i=a.x,r=a.y,c=o[1],s=(c.x,c.y,Object(je.a)(e._p,2)),u=s[0],d=u.x,l=u.y,p=s[1],f=(p.x,p.y,(-t.dy*(i-d)+t.dx*(r-l))/(-e.dx*t.dy+t.dx*e.dy)),h=(e.dx*(r-l)-e.dy*(i-d))/(-e.dx*t.dy+t.dx*e.dy);return!n||_e(f,0,1)&&_e(h,0,1)?[ke(0,i+h*t.dx,r+h*t.dy)]:[]}function Te(t,e,n){var o=Object(je.a)(e._p,2),a=o[0],i=a.x,r=a.y,c=o[1],s=c.x,u=c.y,d=t.center,l=d.x,p=d.y,f=(i-l)*(u-p)-(s-l)*(r-p),h=Re(f),g=Re(e.dx)+Re(e.dy),y=Math.sqrt(Re(t.radius)*g-h);if(y<0)return[];var v=f*e.dy/g,m=-f*e.dx/g,b=(e.dy<0?-1*e.dx:e.dx)*y/g,x=Math.abs(e.dy)*y/g;return we()([ke(0,v+b+l,m+x+p),ke(1,v-b+l,m-x+p)],Be).filter(function(t){return!n||_e(t.x,i,s)&&_e(t.y,r,u)})}var ze=function(t){function e(t){var n;Object(s.a)(this,e);for(var o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];return t instanceof xe&&(a.shift(t),t=null),(n=Object(d.a)(this,Object(l.a)(e).call(this,t,null,null))).which=/function|number/.test(typeof a[a.length-1])?a.pop():0,n.objects=a,n.free=!1,n}return Object(p.a)(e,t),Object(u.a)(e,[{key:"update",value:function(){var t=Ae.apply(null,this.objects);if(t="function"===typeof this.which?t.filter(this.which)[0]:t[this.which]){var e=t;this.x=e.x,this.y=e.y}else this.x=this.y=null}},{key:"toString",value:function(t){var n=Object(be.a)(Object(l.a)(e.prototype),"toString",this).call(this);return t?n+"; intersection of: "+this.objects.map(function(t){return t.toString()}).join(","):n}}]),e}(Ie);Ie.P;function He(t,e){t.classes=t.classes||me.c(),t.classes.add(e)}var Le=function(){function t(e){var n;Object(s.a)(this,t),this.bounds=e,this.bounds.width=this.bounds.right-this.bounds.left,this.bounds.height=this.bounds.bottom-this.bounds.top,this._last=null,this._objects=me.a(),this.equal=(n=(n=Math.sqrt(2))||0,function t(e,o){if(Array.isArray(e)&&Array.isArray(o))return e.every(function(e,n){return t(e,o[n])});if("number"===typeof e&&"number"===typeof o)return Math.abs(e-o)<n;if(e instanceof Ie&&o instanceof Ie)return null!==e.x&&null!==o.x&&null!==e.y&&null!==o.y&&t(Math.abs(e.x-o.x)+Math.abs(e.y-o.y),0);if(e instanceof Ee&&o instanceof Ee)return t(e.radius,o.radius)&&t(e.center,o.center);if(e instanceof De&&o instanceof De){var a=[].concat(e.p),i=[].concat(o.p);return a[0].x>a[1].x&&i[0].x<i[0].x&&a.reverse(),t(a,i)}return e instanceof Pe&&o instanceof Pe?t(e.m,o.m)&&t(e.y(0),o.y(0))&&t(e.x(0),o.x(0)):e===o}),this.log=[]}return Object(u.a)(t,[{key:"points",value:function(){return this._objects.values().filter(function(t){return t instanceof Ie})}},{key:"objects",value:function(){return this._objects.values()}},{key:"find",value:function(t){for(var e=this._objects.values(),n=0;n<e.length;n++)if(this.equal(e[n],t))return e[n];return null}},{key:"is",value:function(t){var e=this;return"string"===typeof t&&(t=this.get(t)),function(n){return t&&e.equal(t,n)}}},{key:"isnt",value:function(t){var e=this;return"string"===typeof t&&(t=this.get(t)),function(n){return t&&!e.equal(t,n)}}},{key:"last",value:function(){return this._last}},{key:"get",value:function(t){return this._objects.get(t)}},{key:"point",value:function(t,e,n){return this.add(new Ie(t,e,n))}},{key:"circle",value:function(t,e,n){return this.add(new Ee(t,this.get(e),n))}},{key:"segment",value:function(t,e,n){return this.add(new De(t,this.get(e),this.get(n)))}},{key:"line",value:function(t,e,n){return this.add(new Pe(t,this.get(e),this.get(n)))}},{key:"intersection",value:function(t,e,n,o){"undefined"===typeof n&&(n=e,e=t,t=null);var a=this.get(e),i=this.get(n);if(!a)throw new Error("Can't find object "+e);if(!i)throw new Error("Can't find object "+n);return this.add(new ze(t,a,i,o))}},{key:"group",value:function(t){return this._currentTag=t,this}},{key:"add",value:function(t){var e=this._objects.get(t.name);if(e&&e.constructor.name===t.constructor.name){for(var n in t)e[n]=t[n];t=e}else{if(e||(e=this.find(t)))return this;t.name=t.name||this.freeName(),this._objects.set(t.name,t)}return this._currentTag&&He(t,this._currentTag),t.free&&He(t,"free-point"),this.update(t),this._last=t,this}},{key:"freeName",value:function(){for(var t=this._objects.keys(),e=0;t.indexOf("object"+e)>=0;e++);return"object"+e}},{key:"update",value:function(t){this._objects.values().filter(function(t){return t instanceof ze}).forEach(function(t){return t.update()})}},{key:"logState",value:function(t){var e=this._objects.values(),n=(this.points(),{label:t,time:(new Date).toString(),objects:e.map(function(t){return t.toString()})});this.log.push(n)}}]),t}();function Ue(){var t=Array.prototype.slice.call(arguments,0);return function(e){return t.concat(e.classes?e.classes.values():[]).join(" ")}}function Ve(t,e){var n=me.b(e),o=n.selectAll("g.circle").data(t.objects().filter(function(t){return t instanceof Ee})),a=o.enter().append("g").attr("class",Ue("circle"));a.append("circle").attr("class","handle"),a.append("circle").attr("class","visible"),o.attr("class",Ue("circle")).selectAll("circle").attr("cx",function(t){return t.center.x}).attr("cy",function(t){return t.center.y}).attr("r",function(t){return t.radius}),o.exit().remove();var i=n.selectAll("g.line").data(t.objects().filter(function(t){return t instanceof Pe})),r=i.enter().append("g").attr("class",Ue("line"));function c(e,n){return function(o){return(o instanceof De?o:De.clip(t.bounds,o)).p[e][n]}}r.filter(function(t){return t instanceof De}).attr("class",Ue("line","segment")),r.append("line").attr("class","handle"),r.append("line").attr("class","visible"),i.attr("class",Ue("line")).selectAll("line").attr("x1",c(0,"x")).attr("y1",c(0,"y")).attr("x2",c(1,"x")).attr("y2",c(1,"y")),i.exit().remove()}n(93);var Je,Ge,Xe=function(t){function e(){return Object(s.a)(this,e),Object(d.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){this.renderGeometry(this.props.drawingData)}},{key:"componentDidUpdate",value:function(){this.renderGeometry(this.props.drawingData)}},{key:"renderGeometry",value:function(t){for(var e=document.getElementById("geometry");e.firstChild;)e.firstChild.remove();for(var n=document.getElementById("points");n.firstChild;)n.firstChild.remove();var o=t.points,a=t.segments,i=t.circles,r=e.viewBox.baseVal,c=r.width,s=r.height,u=new Le({left:r.x,top:r.y,right:r.x+c,bottom:r.y+s}),d=[],l=[];o.forEach(function(t){d.push(t.coordinate.x),l.push(t.coordinate.y)});var p=Math.max.apply(Math,d)-Math.min.apply(Math,d),f=Math.max.apply(Math,l)-Math.min.apply(Math,l),h=0;h=p/f>=1?Math.floor(c/p)-15:Math.floor(s/f)-15;var g=Math.min.apply(Math,d)+p/2,y=Math.min.apply(Math,l)+f/2;o.forEach(function(t){u.point(t.id,t.coordinate.x*h+c/2-h*g,t.coordinate.y*h+s/2-h*y)}),a.forEach(function(t){t&&t.visible&&u.segment(t.name,t.name[0],t.name[1])}),i&&Object.keys(i).forEach(function(t){u.point(t,i[t].center.x*h+c/2-h*g,i[t].center.y*h+s/2-h*y),u.circle("circle-".concat(t),t,i[t].radius*h)}),u.update(),Ve(u,e),Ve(u,e),function(t,e){var n=me.b(e).selectAll("circle.point").data(t.objects().filter(function(t){return t instanceof Ie}));n.enter().append("circle").attr("class",Ue("point")).attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}).attr("r",function(t){return 5}),n.enter().append("text").attr("class",Ue("point-name")).attr("x",function(t){return t.x+10}).attr("y",function(t){return t.y-15}).attr("id",function(t){return"point-".concat(t.name)}),n.enter()._groups[0].forEach(function(t){var e=t.__data__.name;document.getElementById("point-".concat(e)).appendChild(document.createTextNode(e))}),n.exit().remove()}(u,n)}},{key:"render",value:function(){return o.createElement("div",{className:"geometry-container"},o.createElement("svg",{id:"geometry",className:"geometry-scene",viewBox:"0 0 800 800"}),o.createElement("svg",{id:"points",className:"geometry-scene",viewBox:"0 0 800 800"}))}}]),e}(o.Component),Ke=Object(h.a)((Ge=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(d.a)(this,Object(l.a)(e).call(this,t))).inputRefs=[],n.state={focusIndex:0,points:[{id:"A",coordinate:{x:0,y:0,z:0}},{id:"B",coordinate:{y:5,x:-7}},{id:"C",coordinate:{x:-9,y:4.0901353661613005}},{id:"H",coordinate:{x:-3.0849364905389067,y:6.781088913245535}},{id:"D",coordinate:{x:-5.250000000000003,y:3.7500000000000018}},{id:"E",coordinate:{x:-8,y:9.794855240493977}}],segments:["AB","BC","AC","AH","DH","DE","HB","HA","HA","HD","DA","DD","DD","DA","ED","EA","HB","HA","HA","HD","DA","DD","DD","DA","ED","EA","HB","HA","HA","HD","DA","DD","DD","DA","ED","EA"],drawingSegments:[]},n.scrollView=a.a.createRef(),n}return Object(p.a)(e,t),Object(u.a)(e,[{key:"componentWillMount",value:function(){var t=this.state,e=t.points,n=t.segments;this.setState({drawingSegments:this.trimDrawingData({points:e,segments:n}).map(function(t){return{name:t,visible:!0}})})}},{key:"scrollToBottom",value:function(){var t=this;this.scrollView.current&&setTimeout(function(){t.scrollView.current.firstChild.scrollIntoView(!1)},250)}},{key:"trimDrawingData",value:function(t){var e=this,n=t.points,o=t.segments,a={};n.forEach(function(t){a[t.id]=t.coordinate});var i={},r=[];n.forEach(function(t){i[t.id]=o.map(function(t){return t.split("").sort().join("")}).filter(function(e){return e.includes(t.id)}).map(function(t){var e=a[t[0]],n=a[t[1]];return{name:t,vector:F(e,n),length:Q(e,n)}})});var s=[];return Object.keys(i).forEach(function(t){if(i[t].length>0){var n=e.uniqueSegmentData(i[t],s);r=r.concat(n)}}),r=Object(c.a)(new Set(r)).filter(function(t){return t[0]!==t[1]})}},{key:"uniqueSegmentData",value:function(t,e){for(var n,o,a=[t[0]],i=1;i<t.length;i++){for(var r=t[i],c=a.length,s=-1,u=0;u<c;u++)n=r.vector,o=a[u].vector,(0===n.x?0===o.x&&n.y/Math.abs(n.y)===o.y/Math.abs(o.y):0===n.y?0===o.y&&n.x/Math.abs(n.x)===o.x/Math.abs(o.x):0===o.x?0===n.x&&n.y/Math.abs(n.y)===o.y/Math.abs(o.y):0===o.y?0===n.y&&n.x/Math.abs(n.x)===o.x/Math.abs(o.x):n.x/Math.abs(n.x)===o.x/Math.abs(o.x)&&n.y/Math.abs(n.y)===o.y/Math.abs(o.y)&&K(n.x*o.y)===K(n.y*o.x))&&(r.length>=a[u].length?s=u:e.push(r.name));s>=0?a[s]=r:e.includes(r.name)||a.push(r)}return a.map(function(t){return t.name})}},{key:"onValueChange",value:function(t,e){re.RelationsInput[e].value=t,this.setState({focusIndex:e})}},{key:"onSubmit",value:function(t){t===re.RelationsInput.length-1&&re.RelationsInput[t].value.length>2&&re.addNewInput(),this.setState({focusIndex:t+1})}},{key:"onBackspace",value:function(t){0===re.RelationsInput[t].value.length&&re.RelationsInput.length>1&&(re.removeInput(t),this.inputRefs.splice(t,1),this.setState({focusIndex:t-1}))}},{key:"onClickDrawing",value:function(){re.getData.clear();var t=re.analyzeInput();0!==t.points.length||0!==t.segments.length?this.setState({points:t.points,segments:t.segments,drawingSegments:this.trimDrawingData(t).map(function(t){return{name:t,visible:!0}})}):re.resetInputsStatus()}},{key:"componentDidUpdate",value:function(){var t=this.state.focusIndex;this.inputRefs[t]&&this.inputRefs[t].focus()}},{key:"renderRelationInput",value:function(){var t=this;return re.RelationsInput.map(function(e,n){return a.a.createElement(de,{key:"input-".concat(n),ref:function(e){t.inputRefs[n]=e},onValueChange:function(e){t.onValueChange(e,n)},onSubmit:function(){t.onSubmit(n)},onBackspace:function(){t.onBackspace(n)},value:e.value,status:e.status})})}},{key:"onDoneSegmentSetting",value:function(t,e){var n=this,o=this.state.drawingSegments;if(JSON.stringify(t)!==JSON.stringify(o[e])){var a=!!o[e];o[e]=t,this.setState({drawingSegments:o},function(){a&&o.map(function(t){return t.name}).includes(t.name)&&n.onDeleteSegmentSetting(e)})}}},{key:"onChangeSegmentSetting",value:function(t,e){var n=this.state.drawingSegments;n[e]=t,this.setState({drawingSegments:n})}},{key:"onDeleteSegmentSetting",value:function(t){var e=this.state.drawingSegments;e.splice(t,1),this.setState({drawingSegments:e})}},{key:"addNewSegmentSetting",value:function(){this.state.drawingSegments.includes(void 0)||(this.scrollToBottom(),this.setState(function(t){return{drawingSegments:t.drawingSegments.concat([void 0])}}))}},{key:"renderSegmentSettings",value:function(){var t=this,e=this.state.drawingSegments,n=this.state.points.map(function(t){return t.id});return e.map(function(e,o){return a.a.createElement(ve,{key:"segment-setting-".concat(o),data:n,value:e,onDone:function(e){t.onDoneSegmentSetting(e,o)},onVisibleChange:function(e){t.onChangeSegmentSetting(e,o)},onDelete:function(){t.onDeleteSegmentSetting(o)},style:0===o?{marginTop:"1rem"}:{}})})}},{key:"render",value:function(){var t=this.state,e=t.points,n=t.drawingSegments;t.segments;return a.a.createElement("div",{className:"container-fluid"},a.a.createElement("div",{className:"app-header"},a.a.createElement("div",{className:"app-name"},a.a.createElement("p",null,"Gemath")),a.a.createElement("div",{className:"app-description"},a.a.createElement("p",null,"app description"))),a.a.createElement("div",{className:"app-body"},a.a.createElement("div",{className:"app-controller"},a.a.createElement("div",{className:"accordion",id:"accordionExample"},a.a.createElement("div",{className:"card"},a.a.createElement("div",{className:"card-header left-panel-tab",id:"headingOne","data-toggle":"collapse","data-target":"#viewOne","aria-expanded":"true","aria-controls":"collapseOne"},a.a.createElement("p",null,"1. Nh\u1eadp \u0111\u1ec1"),a.a.createElement(y.a,{key:"right",container:this,placement:"right",overlay:a.a.createElement(v.a,{id:"tooltip-right",className:"help-tooltip"},a.a.createElement("div",null,k.TutorialString.STEP_ONE))},a.a.createElement("div",{className:"bg-transparent icon-container"},a.a.createElement(pe,{name:"icInformation",width:22,height:22})))),a.a.createElement("div",{id:"viewOne",className:"collapse show","aria-labelledby":"headingOne","data-parent":"#accordionExample"},a.a.createElement("div",{className:"card-body"},a.a.createElement("div",null,this.renderRelationInput(),a.a.createElement(m.a,{type:"button",className:"btn btn-success w-100",onClick:this.onClickDrawing,disabled:re.isInputEmpty},"V\u1ebd h\xecnh"))))),a.a.createElement("div",{className:"card"},a.a.createElement("div",{className:"card-header left-panel-tab",id:"headingTwp","data-toggle":"collapse","data-target":"#viewTwo","aria-expanded":"true","aria-controls":"collapseTwp"},a.a.createElement("p",null,"2. Ch\u1ec9nh s\u1eeda h\xecnh"),a.a.createElement(y.a,{key:"right",container:this,placement:"right",overlay:a.a.createElement(v.a,{id:"tooltip-right",className:"help-tooltip"},a.a.createElement("span",null,"Th\xeam/X\xf3a c\xe1c do\u1ea1n th\u1eb3ng"))},a.a.createElement("div",{className:"bg-transparent icon-container"},a.a.createElement(pe,{name:"icInformation",width:22,height:22})))),a.a.createElement("div",{id:"viewTwo",className:"collapse ","aria-labelledby":"headingOne","data-parent":"#accordionExample"},a.a.createElement("div",{className:"card-body",ref:this.scrollView},a.a.createElement("div",null,this.renderSegmentSettings(),a.a.createElement("div",{className:"add-row-container",onClick:this.addNewSegmentSetting},a.a.createElement(pe,{name:"icAdd",width:35,height:35,color:"#757575"}),a.a.createElement("p",null,"Th\xeam \u0111o\u1ea1n th\u1eb3ng")))))))),a.a.createElement("div",{className:"app-drawing-panel"},a.a.createElement(Xe,{drawingData:{points:e,segments:n,circles:re.circlesData}}))),a.a.createElement("div",{className:"app-footer"},a.a.createElement("p",null,"abc")))}}]),e}(a.a.Component),Object(f.a)(Ge.prototype,"scrollToBottom",[g.a],Object.getOwnPropertyDescriptor(Ge.prototype,"scrollToBottom"),Ge.prototype),Object(f.a)(Ge.prototype,"trimDrawingData",[g.a],Object.getOwnPropertyDescriptor(Ge.prototype,"trimDrawingData"),Ge.prototype),Object(f.a)(Ge.prototype,"onValueChange",[g.a],Object.getOwnPropertyDescriptor(Ge.prototype,"onValueChange"),Ge.prototype),Object(f.a)(Ge.prototype,"onSubmit",[g.a],Object.getOwnPropertyDescriptor(Ge.prototype,"onSubmit"),Ge.prototype),Object(f.a)(Ge.prototype,"onBackspace",[g.a],Object.getOwnPropertyDescriptor(Ge.prototype,"onBackspace"),Ge.prototype),Object(f.a)(Ge.prototype,"onClickDrawing",[g.a],Object.getOwnPropertyDescriptor(Ge.prototype,"onClickDrawing"),Ge.prototype),Object(f.a)(Ge.prototype,"renderRelationInput",[g.a],Object.getOwnPropertyDescriptor(Ge.prototype,"renderRelationInput"),Ge.prototype),Object(f.a)(Ge.prototype,"onDoneSegmentSetting",[g.a],Object.getOwnPropertyDescriptor(Ge.prototype,"onDoneSegmentSetting"),Ge.prototype),Object(f.a)(Ge.prototype,"onChangeSegmentSetting",[g.a],Object.getOwnPropertyDescriptor(Ge.prototype,"onChangeSegmentSetting"),Ge.prototype),Object(f.a)(Ge.prototype,"onDeleteSegmentSetting",[g.a],Object.getOwnPropertyDescriptor(Ge.prototype,"onDeleteSegmentSetting"),Ge.prototype),Object(f.a)(Ge.prototype,"addNewSegmentSetting",[g.a],Object.getOwnPropertyDescriptor(Ge.prototype,"addNewSegmentSetting"),Ge.prototype),Object(f.a)(Ge.prototype,"renderSegmentSettings",[g.a],Object.getOwnPropertyDescriptor(Ge.prototype,"renderSegmentSettings"),Ge.prototype),Je=Ge))||Je;r.a.render(a.a.createElement(Ke,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},57:function(t,e,n){t.exports={inputSuccess:"#28a745",inputError:"#dc3545",inputNormal:"#6c757d"}},67:function(t,e,n){t.exports=n(105)},72:function(t,e,n){},73:function(t,e,n){},74:function(t,e,n){t.exports={inputSuccess:"#28a745",inputError:"#dc3545",inputNormal:"#6c757d"}},80:function(t,e,n){},93:function(t,e,n){}},[[67,1,2]]]);
//# sourceMappingURL=main.1d3c6467.chunk.js.map